"use strict";(self["webpackChunkeslweb"]=self["webpackChunkeslweb"]||[]).push([[8205],{1560:function(e,t,a){a.d(t,{Z:function(){return u}});var s=a(66252);const o=e=>((0,s.dD)("data-v-40885983"),e=e(),(0,s.Cn)(),e),i={class:"action-container"},l={class:"action-l"},n=(0,s.Uk)(" BACK "),r=o((()=>(0,s._)("div",{class:"action-r"},null,-1)));function c(e,t,a,o,c,d){const g=(0,s.up)("ArrowLeft"),h=(0,s.up)("el-icon"),u=(0,s.up)("el-button");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",l,[(0,s.Wm)(u,{onClick:t[0]||(t[0]=e=>d.backToSearchResults()),link:""},{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Wm)(g)])),_:1}),n])),_:1})]),r])}var d={name:"businessProfileAction",methods:{backToSearchResults(){this.$router.go(-1)}}},g=a(48118);const h=(0,g.Z)(d,[["render",c],["__scopeId","data-v-40885983"]]);var u=h},85521:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});var s=a(61708),o=a(1560),i=a(36774),l=a(66252);const n={class:"bg"},r={class:"xll-container"};function c(e,t,a,c,d,g){const h=i.Z,u=(0,l.up)("el-col"),m=o.Z,f=s.Z,p=(0,l.up)("el-scrollbar"),D=(0,l.up)("el-row"),b=(0,l.Q2)("loading");return(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",r,[(0,l.Wm)(D,{gutter:0,align:"top",justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{xs:0,sm:24,md:4,lg:4,xl:4},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{locationData:d.locationOptions,tagsData:d.tagsData,subCateData:d.subCateData,onSearch:g.confirmFilterSearch},null,8,["locationData","tagsData","subCateData","onSearch"])])),_:1}),(0,l.Wm)(u,{class:"deal-business-col",xs:24,sm:24,md:20,lg:20,xl:20},{default:(0,l.w5)((()=>[(0,l.Wm)(m),(0,l.Wm)(p,{class:"deal-business-bg"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{info:d.companyInfo,fromMe:!1,identity:5},null,8,["info"])])),_:1})])),_:1})])),_:1})])])),[[b,d.showLoadingStatus]])}var d=a(41836),g=a(44276),h=a(6158),u=a.n(h),m=a(19651),f=a.n(m),p=a(42576),D={name:"vendorProfile",components:{dealFilterComponent:i.Z,businessProfile:s.Z,businessProfileActionWithBack:o.Z},setup(){const e=window.location.href;return{locationUrl:e}},data(){return{subCateData:[],locationValue:"",locationOptions:[],tagValue:[],tagsData:[],dealsListData:[],dealPage:1,dealLimit:10,dealTotalNum:0,sCateId:0,showLoadingStatus:!0,adsHeight:"190px",adsDataTop:[],adsDataMid:[],adsDataBottom:[],featuredDealsData:[],dealDetailDialogVisible:!1,dealDetailData:{},qrcodeValue:"",webDomain:"https://dev.edupassport.cn",showDealDetailStatus:!1,filterIsOnlineValue:!1,detailData:{},accessToken:"pk.eyJ1Ijoic3JrbGluZ2UiLCJhIjoiY2t2NnR4anI2OWU5NDJ3bWE1dHd3c3h1aSJ9.O0JfjqiyBBkFuf4G-DQ-DQ",mapStyle:"mapbox://styles/mapbox/streets-v11",shareDialogVisible:!1,shareInfo:{},filterResultData:{},companyInfo:{}}},unmounted(){(0,p.lJ)(),window.onresize=null},mounted(){let e=document.body.clientWidth,t=Math.floor(e);t<768&&(0,p.lJ)(),t>=992&&t<1200&&(this.adsHeight="120px"),t>=1200&&t<1920&&(this.adsHeight="140px"),t>=1920&&(this.adsHeight="190px"),window.onresize=()=>{t<768&&(0,p.lJ)(),t>=992&&t<1200&&(this.adsHeight="120px"),t>=1200&&t<1920&&(this.adsHeight="140px"),t>=1920&&(this.adsHeight="190px")};let a=this.$route.query.uid,s=this.$route.query.i,o=this.$route.query.cid;a&&s&&o&&(this.getVisitorUserInfo(a,s,o),this.addUserBrowsingHistory(o)),this.getFeaturedDealsList(),this.getSubIdentityList(),this.getTagsList(),this.getDealsAreaList(),this.getAdsList()},methods:{addUserBrowsingHistory(e){let t={type:8,type_id:e};(0,d.Z7)(t).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))},confirmFilterSearch(e){console.log(e),this.filterResultData=e,this.getDealsList(this.dealPage,this.dealLimit)},backToSearchResults(){this.$router.go(-1)},readMoreDeal(e){this.showDealDetailStatus=!0,this.dealDetailDialogVisible=!1,this.$router.push({path:"/deals",query:{id:e}})},showDealDetailDialog(e){this.dealDetailData=e,this.dealDetailDialogVisible=!0,this.qrcodeValue=this.webDomain+"?id="+e.id},shareDeal(e){this.shareDialogVisible=!0,this.shareInfo=e},getVisitorUserInfo(e,t,a){let s={user_id:e,identity:t,company_id:a};(0,d.Vd)(s).then((e=>{console.log(e),200==e.code&&(this.companyInfo=e.message.user_contact.company,this.showLoadingStatus=!1)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},turnBanner(e){if(console.log(e),""!=e)window.location.href=e;else{let e=localStorage.getItem("token");if(!e)return void window.open("https://salesiq.zoho.com/signaturesupport.ls?widgetcode=75672d291fd9d5fcab53ffa3194f32598809c21f9b5284cbaf3493087cdd2e0d1a2010ab7b6727677d37b27582c0e9c4","_blank");this.$router.push("/me/ads/platform")}},getAdsList(){let e={page:1,limit:1e4};(0,d.tb)(e).then((e=>{if(200==e.code){let t=[],a=[],s=[],o=localStorage.getItem("identity");o||(t=e.message.filter((e=>"guest_d1"==e.name)),a=e.message.filter((e=>"guest_d2"==e.name)),s=e.message.filter((e=>"guest_d3"==e.name))),1==o&&(t=e.message.filter((e=>"educator_d1"==e.name)),a=e.message.filter((e=>"educator_d2"==e.name)),s=e.message.filter((e=>"educator_d3"==e.name))),2!=o&&3!=o&&4!=o||(t=e.message.filter((e=>"business_d1"==e.name)),a=e.message.filter((e=>"business_d2"==e.name)),s=e.message.filter((e=>"business_d3"==e.name))),5==o&&(t=e.message.filter((e=>"vendor_d1"==e.name)),a=e.message.filter((e=>"vendor_d2"==e.name)),s=e.message.filter((e=>"vendor_d3"==e.name))),t.length>0&&(this.adsDataTop=t[0].data),a.length>0&&(this.adsDataMid=a[0].data),s.length>0&&(this.adsDataBottom=s[0].data)}})).catch((e=>{this.$message.error(e.msg)}))},turnDealDetail(e){this.$router.push({path:"/deals/detail",query:{id:e}})},getSubIdentityList(){let e={pid:5,tree:1};(0,d.cF)(e).then((e=>{console.log(e),200==e.code&&(this.subCateData=e.message)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},getTagsList(){let e={page:1,limit:1e3};(0,d.g_)(e).then((e=>{console.log(e),200==e.code&&(this.tagsData=e.message.data)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getDealsAreaList(){(0,d.DP)({}).then((e=>{console.log(e),200==e.code&&(this.locationOptions=e.message)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},addFavorite(e,t,a,s,o){let i={token:localStorage.getItem("token"),type:t,type_id:e,type_title:a,type_url:s};(0,d.q8)(i).then((e=>{console.log(e),200==e.code&&(this.$message.success("Success"),this.dealsListData[o]["is_favorite"]=1)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},cancelFavorite(e,t,a){let s={token:localStorage.getItem("token"),type:e,type_id:t};(0,d.Bv)(s).then((e=>{console.log(e),200==e.code&&(this.dealsListData[a]["is_favorite"]=0)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},addFavoriteFeatured(e,t,a,s,o){let i={token:localStorage.getItem("token"),type:t,type_id:e,type_title:a,type_url:s};(0,d.q8)(i).then((e=>{console.log(e),200==e.code&&(this.$message.success("Success"),this.featuredDealsData[o]["is_favorite"]=1)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},cancelFavoriteFeatured(e,t,a){let s={token:localStorage.getItem("token"),type:e,type_id:t};(0,d.Bv)(s).then((e=>{console.log(e),200==e.code&&(this.featuredDealsData[a]["is_favorite"]=0)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},offerDeal(){let e=localStorage.getItem("token"),t=this;if(!e||""==e)return this.$msgbox({title:"Offer a Deal",message:"Before offer a deal, you need to log in",type:"warning",confirmButtonText:"Log in",callback(e){if(console.log(e),"confirm"===e){let e={path:"/deals",query:{id:t.$route.query.id}},a=(0,g.cv)(JSON.stringify(e));t.$router.push({path:"/login",query:{redirect_params:a}})}}});let a=localStorage.getItem("identity");if(5!=a)return this.$message.error("Oops! Your current identity is not an vendor, please switch to Vendor");t.$router.push({path:"/deals/offer",query:{}})},getFeaturedDealsList(){let e={};(0,d.dV)(e).then((e=>{console.log(e),200==e.code&&(this.featuredDealsData=e.message)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},initMap(e,t){u().accessToken=this.accessToken;const a=new(u().Map)({container:"mapContainer",center:[e,t],style:this.mapStyle,zoom:12}),s=new(u().NavigationControl);a.addControl(s,"top-right");const o=new(u().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});a.addControl(o,"top-right");const i=new(f())({accessToken:this.accessToken,mapboxgl:u()});a.addControl(i,"top-left");const l=new(u().Marker);l.setLngLat([e,t]).addTo(a)}}},b=a(48118);const y=(0,b.Z)(D,[["render",c],["__scopeId","data-v-28c09d0a"]]);var _=y}}]);
//# sourceMappingURL=8205.06bece6d.js.map