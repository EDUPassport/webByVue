"use strict";(self["webpackChunkeslweb"]=self["webpackChunkeslweb"]||[]).push([[138],{6846:function(e,t,o){o.r(t),o.d(t,{default:function(){return J}});var s=o(61708),i=o(27033),a=o(11246),n=o(56995),l=o(66252);const r={class:"business-profile-container"},c={class:"business-profile-l"},g={class:"business-profile-r"},m={class:"business-jobs"};function h(e,t,o,h,u,d){const b=n.Z,p=a.Z,f=(0,l.up)("el-col"),y=i.Z,J=s.Z,_=(0,l.up)("el-scrollbar"),v=(0,l.up)("el-row");return(0,l.wg)(),(0,l.iD)("div",r,[(0,l._)("div",c,[(0,l.Wm)(b)]),(0,l._)("div",g,[(0,l.Wm)(v,{gutter:0,align:"top",justify:"space-between"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{xs:0,sm:0,md:8,lg:9,xl:8},{default:(0,l.w5)((()=>[(0,l._)("div",m,[(0,l.Wm)(p,{jobListData:u.otherJobsData,companyInfo:u.companyInfo,jobLimit:u.otherJobLimit,jobTotalNum:u.otherJobTotalNum,jobPage:u.otherJobPage,adsData:[],"from-business-profile":!0,onJobDetailEvent:d.turnJobDetail,onBackToResults:d.backToResults,onJobPageChange:d.otherJobPageChange,onAddFavorite:d.addFavorite,onCancelFavorite:d.cancelFavorite},null,8,["jobListData","companyInfo","jobLimit","jobTotalNum","jobPage","onJobDetailEvent","onBackToResults","onJobPageChange","onAddFavorite","onCancelFavorite"])])])),_:1}),(0,l.Wm)(f,{class:"business-profile-col",xs:24,sm:24,md:16,lg:15,xl:16},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{info:u.companyInfo,identity:d.identity},null,8,["info","identity"]),(0,l.Wm)(_,{class:"business-profile"},{default:(0,l.w5)((()=>[(0,l.Wm)(J,{info:u.companyInfo,identity:d.identity,fromMe:!0},null,8,["info","identity"])])),_:1})])),_:1})])),_:1})])])}var u=o(41836),d=o(44276),b=o(42576),p={name:"profile",components:{meSideMenu:n.Z,businessProfile:s.Z,jobsListComponent:a.Z,businessProfileActionWithPreview:i.Z},computed:{identity:{get(){return this.$store.state.identity}}},data(){return{profilePercentage:0,userContact:{},companyContact:{},companyInfo:{},otherJobsData:[],otherJobTotalNum:0,otherJobLimit:10,otherJobPage:1}},unmounted(){(0,b.lJ)(),window.onresize=null},mounted(){let e=document.body.clientWidth,t=Math.floor(e);t<=768&&(0,b.lJ)(),window.onresize=()=>{t<=768&&(0,b.lJ)()};let o=this.$route.query.str;o&&console.log((0,d.Jx)(o)),this.getUserInfo(),this.updateBusinessProfile(),this.getCompanyJobList(1,1e4)},methods:{updateBusinessProfile(){let e={token:localStorage.getItem("token")};2==this.identity&&(0,u.H7)(e).then((e=>{console.log(e)})).catch((e=>{console.log(e),this.$message.error(e.msg)})),3==this.identity&&(0,u.kg)(e).then((e=>{console.log(e)})).catch((e=>{console.log(e),this.$message.error(e.msg)})),4==this.identity&&(0,u.yx)(e).then((e=>{console.log(e)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getUserInfo(){let e=localStorage.getItem("identity"),t={identity:e};(0,u.Lk)(t).then((t=>{if(console.log(t),200==t.code){let o=t.message.user_contact,s=t.message.user_contact.company;if(2==e&&(this.profilePercentage=o.is_recruiting),3==e&&(this.profilePercentage=o.is_school),4==e&&(this.profilePercentage=o.is_other),s&&(this.companyInfo=s,this.$store.commit("jobCompanyName",s.company_name),s.benefits)){let e=s.benefits;e.forEach(((t,o)=>{e[o].id=t.object_id,e[o].pid=t.object_pid})),this.selectBenefitsList=e,this.benefitsList=s.benefits}o&&(this.userContact=o);let i=s.images;this.accountImageFileList=[],i&&i.forEach((e=>{let t={name:"",url:e.url};this.accountImageFileList.push(t)}))}})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getCompanyJobList(e,t){let o=localStorage.getItem("uid"),s={user_id:o,is_open:1,status:1,page:e,limit:t};(0,u.kM)(s).then((e=>{console.log(e),200==e.code&&(this.otherJobsData=e.message.data,this.otherJobTotalNum=e.message.total)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},turnJobDetail(e,t){let o="/jobs/detail/"+e+"/"+t,s=localStorage.getItem("uid");this.selectedJobId=e,this.$router.push({path:o,query:{uid:s}})},otherJobPageChange(e){console.log(e),this.otherJobPage=e,this.selectedJobId=0,this.getCompanyJobList(this.companyInfo.user_id,e,this.otherJobLimit)},backToResults(){this.isOther=!1,this.$router.push({path:"/jobs",query:{id:this.selectedJobId,page:this.jobPage}})},addFavorite(e,t,o,s,i){let a={token:localStorage.getItem("token"),type:t,type_id:e,type_title:o,type_url:s};(0,u.q8)(a).then((e=>{console.log(e),200==e.code&&(this.$message.success("Success"),this.jobListData[i]["is_favorite"]=1)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},cancelFavorite(e,t,o){let s={token:localStorage.getItem("token"),type:e,type_id:t};(0,u.Bv)(s).then((e=>{console.log(e),200==e.code&&(this.jobListData[o]["is_favorite"]=0)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))}}},f=o(48118);const y=(0,f.Z)(p,[["render",h],["__scopeId","data-v-031c38ca"]]);var J=y}}]);
//# sourceMappingURL=138.e05ba484.js.map