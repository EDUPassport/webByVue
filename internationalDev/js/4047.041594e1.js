"use strict";(self["webpackChunkeslweb"]=self["webpackChunkeslweb"]||[]).push([[4047],{31842:function(e,a,t){var i=t(66252);const s={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 13 24",width:"1.2em",height:"1.2em"},l=(0,i._)("path",{fill:"currentColor",d:"M0 2.089v21.912l6.546-6.26l6.545 6.26V2.089A2.11 2.11 0 0 0 10.982 0l-.077.001h.004h-8.726L2.11 0A2.109 2.109 0 0 0 .001 2.088v.001z"},null,-1),o=[l];function n(e,a){return(0,i.wg)(),(0,i.iD)("svg",s,o)}a["Z"]={name:"fontisto-favorite",render:n}},42077:function(e,a,t){t.d(a,{Z:function(){return h}});var i=t(66252);const s={class:"xll-ads-c"},l={class:"xll-ads-l"},o={class:"image-ads-slot"},n={class:"xll-ads-r"},r=["innerHTML"];function d(e,a,t,d,c,g){const u=(0,i.up)("Picture"),h=(0,i.up)("el-icon"),m=(0,i.up)("el-image"),p=(0,i.up)("el-carousel-item"),D=(0,i.up)("el-carousel");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(D,{class:"xll-carousel",height:t.height,"indicator-position":"none"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.adsData,((e,a)=>((0,i.wg)(),(0,i.j4)(p,{class:"xll-ads-swiper-item",key:a,onClick:a=>g.turnAdsDetail(e.link)},{default:(0,i.w5)((()=>[(0,i._)("div",s,[(0,i._)("div",l,[(0,i.Wm)(m,{class:"xll-ads-l-img",fit:"cover",src:""!=e.user_url?e.user_url:e.url},{error:(0,i.w5)((()=>[(0,i._)("div",o,[(0,i.Wm)(h,{size:80,color:"#808080"},{default:(0,i.w5)((()=>[(0,i.Wm)(u)])),_:1})])])),_:2},1032,["src"])]),(0,i._)("div",n,[(0,i._)("div",{class:"xll-ads-r-bg",innerHTML:e.title},null,8,r)])])])),_:2},1032,["onClick"])))),128))])),_:1},8,["height"])])}var c={name:"adsComponent",props:["adsData","height"],methods:{turnAdsDetail(e){window.open(e,"_blank")}}},g=t(48118);const u=(0,g.Z)(c,[["render",d],["__scopeId","data-v-aa41d78c"]]);var h=u},58769:function(e,a,t){t.d(a,{Z:function(){return V}});var i=t(31842),s=t(66252),l=t(56612);const o=e=>((0,s.dD)("data-v-759ce8db"),e=e(),(0,s.Cn)(),e),n={class:"deals-featured-container"},r=o((()=>(0,s._)("div",{class:"deals-featured-label"}," Promoted ",-1))),d={class:"deals-featured-item"},c={class:"deals-item-bg"},g=["onClick"],u=["onClick"],h={class:"deals-item-c"},m={class:"deals-item-c-l"},p={class:"deals-item-c-r"},D=["onClick"],f=["onClick"],_=["onClick"],v={class:"deals-item-b"},w={class:"deals-item-b-l"},y={class:"deals-item-b-r"},k=(0,s.Uk)(" Quick View "),b=(0,s.Uk)(" Details "),C={key:0,class:"xll-ads-container"},$={class:"xll-ads"},L={class:"xll-ads-t"},x={class:"image-ads-slot"},S={class:"xll-ads-b"},W=["innerHTML"];function I(e,a,t,o,I,P){const q=(0,s.up)("el-image"),F=i.Z,V=(0,s.up)("el-icon"),H=(0,s.up)("CollectionTag"),z=(0,s.up)("el-avatar"),T=(0,s.up)("el-button"),Z=(0,s.up)("el-carousel-item"),B=(0,s.up)("el-carousel"),A=(0,s.up)("el-empty"),U=(0,s.up)("Picture"),M=(0,s.up)("el-scrollbar");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(M,{class:"deals-featured-scroll"},{default:(0,s.w5)((()=>[(0,s._)("div",n,[r,t.featuredData.length>0?((0,s.wg)(),(0,s.j4)(B,{key:0,style:{width:"100%",margin:"0 auto",overflow:"hidden"},height:"460px","indicator-position":"none"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.featuredData,((e,a)=>((0,s.wg)(),(0,s.j4)(Z,{key:a},{default:(0,s.w5)((()=>[(0,s._)("div",d,[(0,s._)("div",c,[(0,s.Wm)(q,{class:"deals-item-background-img",src:e.company_info.background_image?e.company_info.background_image:"",fit:"cover",onClick:a=>P.viewProfile(e.user_id,e.identity,e.company_id)},null,8,["src","onClick"]),e.is_favorite&&1==e.is_favorite?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"deals-item-favorite",onClick:t=>P.cancelFavorite(2,e.id,a)},[(0,s.Wm)(V,{color:"#6650B3",size:25},{default:(0,s.w5)((()=>[(0,s.Wm)(F)])),_:1})],8,g)):((0,s.wg)(),(0,s.iD)("div",{key:1,class:"deals-item-favorite",onClick:t=>P.addFavorite(e.id,2,e.title,e.company_logo,a)},[(0,s.Wm)(V,{size:25},{default:(0,s.w5)((()=>[(0,s.Wm)(H)])),_:1})],8,u))]),(0,s._)("div",h,[(0,s._)("div",m,[(0,s.Wm)(z,{class:"deals-logo",src:e.company_logo,onClick:a=>P.viewProfile(e.user_id,e.identity,e.company_id)},null,8,["src","onClick"])]),(0,s._)("div",p,[(0,s._)("div",{class:"deals-item-c-r-1",onClick:a=>P.viewProfile(e.user_id,e.identity,e.company_id)},(0,l.zw)(e.company_info.company_name),9,D),(0,s._)("div",{class:"deals-item-c-r-2",onClick:a=>P.showDealDetailDialog(e)},(0,l.zw)(e.title),9,f),(0,s._)("div",{class:"deals-item-c-r-3",onClick:a=>P.showDealDetailDialog(e)},(0,l.zw)(e.desc),9,_),(0,s._)("div",v,[(0,s._)("div",w,[e.company_info.category_name_en&&"0"!=e.company_info.category_name_en?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Uk)((0,l.zw)(e.company_info.category_name_en),1)],64)):((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[],64))]),(0,s._)("div",y,[(0,s.Wm)(T,{link:"",onClick:a=>P.showDealDetailDialog(e)},{default:(0,s.w5)((()=>[k])),_:2},1032,["onClick"]),(0,s.Wm)(T,{link:"",onClick:a=>P.turnDealDetail(e.id)},{default:(0,s.w5)((()=>[b])),_:2},1032,["onClick"])])])])])])])),_:2},1024)))),128))])),_:1})):((0,s.wg)(),(0,s.j4)(A,{key:1,description:"..."}))]),t.adsData.length>0?((0,s.wg)(),(0,s.iD)("div",C,[(0,s.Wm)(B,{style:{width:"100%",margin:"0 auto",overflow:"hidden"},height:"360px","indicator-position":"none"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.adsData,((e,a)=>((0,s.wg)(),(0,s.j4)(Z,{class:"xll-ads-swiper-item",key:a,onClick:a=>P.turnAdsDetail(e.link)},{default:(0,s.w5)((()=>[(0,s._)("div",$,[(0,s._)("div",L,[(0,s.Wm)(q,{class:"xll-ads-img",fit:"cover",src:""!=e.user_url?e.user_url:e.url},{error:(0,s.w5)((()=>[(0,s._)("div",x,[(0,s.Wm)(V,{size:80,color:"#808080"},{default:(0,s.w5)((()=>[(0,s.Wm)(U)])),_:1})])])),_:2},1032,["src"])]),(0,s._)("div",S,[(0,s._)("div",{class:"xll-ads-b-bg",innerHTML:e.title},null,8,W)])])])),_:2},1032,["onClick"])))),128))])),_:1})])):(0,s.kq)("",!0)])),_:1})])}var P={name:"featuredDealsPromoted",props:["featuredData","adsData"],data(){return{}},methods:{viewProfile(e,a,t){this.$emit("viewProfile",e,a,t)},showDealDetailDialog(e){this.$emit("detail",e)},addFavorite(e,a,t,i,s){this.$emit("addFavorite",e,a,t,i,s)},cancelFavorite(e,a,t){this.$emit("cancelFavorite",e,a,t)},turnAdsDetail(e){window.open(e,"_blank")},turnDealDetail(e){this.$emit("dealDetail",e)}}},q=t(48118);const F=(0,q.Z)(P,[["render",I],["__scopeId","data-v-759ce8db"]]);var V=F},94508:function(e,a,t){t.r(a),t.d(a,{default:function(){return O}});var i=t(92047),s=t(7976),l=t(31842),o=t(42077),n=t(58769),r=t(36774),d=t(66252),c=t(56612);const g={class:"bg"},u={class:"xll-container"},h={key:0,class:"xll-ads-container"},m={class:"deals-bg-container"},p={class:"deals-container"},D={class:"deals-item"},f={class:"deals-item-bg"},_={class:"img-slot-background"},v=["onClick"],w=["onClick"],y={class:"deals-item-c"},k={class:"deals-item-c-l"},b={class:"deals-item-c-r"},C=["onClick"],$=["onClick"],L={class:"deals-item-b"},x={class:"deals-item-b-l"},S={class:"deals-item-b-r"},W=(0,d.Uk)(" Quick View "),I=(0,d.Uk)(" Details "),P={class:"deals-pagination"},q={key:1,class:"xll-ads-bottom-container"};function F(e,a,t,F,V,H){const z=r.Z,T=(0,d.up)("el-col"),Z=n.Z,B=o.Z,A=(0,d.up)("Picture"),U=(0,d.up)("el-icon"),M=(0,d.up)("el-image"),j=l.Z,O=(0,d.up)("CollectionTag"),Y=(0,d.up)("el-avatar"),J=(0,d.up)("el-button"),N=(0,d.up)("el-pagination"),R=(0,d.up)("el-empty"),Q=(0,d.up)("el-scrollbar"),K=(0,d.up)("el-row"),G=s.Z,E=i.Z,X=(0,d.Q2)("loading");return(0,d.wy)(((0,d.wg)(),(0,d.iD)("div",g,[(0,d._)("div",u,[(0,d.Wm)(K,{gutter:0,align:"top",justify:"center"},{default:(0,d.w5)((()=>[(0,d.Wm)(T,{xs:24,sm:24,md:4,lg:4,xl:4},{default:(0,d.w5)((()=>[(0,d.Wm)(z,{locationData:V.locationOptions,tagsData:V.tagsData,subCateData:V.subCateData,onSearch:H.confirmFilterSearch},null,8,["locationData","tagsData","subCateData","onSearch"])])),_:1}),(0,d.Wm)(T,{xs:0,sm:24,md:7,lg:7,xl:6},{default:(0,d.w5)((()=>[(0,d.Wm)(Z,{adsData:V.adsDataMid,featuredData:V.featuredDealsData,onAddFavorite:H.addFavoriteFeatured,onCancelFavorite:H.cancelFavoriteFeatured,onViewProfile:H.viewProfile,onDetail:H.showDealDetailDialog,onDealDetail:H.turnDealDetail},null,8,["adsData","featuredData","onAddFavorite","onCancelFavorite","onViewProfile","onDetail","onDealDetail"])])),_:1}),(0,d.Wm)(T,{class:"deals-list-col",xs:24,sm:24,md:13,lg:13,xl:14},{default:(0,d.w5)((()=>[(0,d.Wm)(Q,{ref:"dealScroll",class:"deals-list-scroll"},{default:(0,d.w5)((()=>[V.adsDataTop.length>0?((0,d.wg)(),(0,d.iD)("div",h,[(0,d.Wm)(B,{height:V.adsHeight,adsData:V.adsDataTop},null,8,["height","adsData"])])):(0,d.kq)("",!0),(0,d._)("div",m,[V.dealsListData.length>0?((0,d.wg)(),(0,d.iD)(d.HY,{key:0},[(0,d._)("div",p,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(V.dealsListData,((e,a)=>((0,d.wg)(),(0,d.iD)("div",{class:"deals-item-container",key:a},[(0,d._)("div",D,[(0,d._)("div",f,[e.company_info?((0,d.wg)(),(0,d.j4)(M,{key:0,class:"deals-item-background-img",src:e.company_info.background_image?e.company_info.background_image:"",fit:"cover"},{error:(0,d.w5)((()=>[(0,d._)("div",_,[(0,d.Wm)(U,{size:45,color:"#808080"},{default:(0,d.w5)((()=>[(0,d.Wm)(A)])),_:1})])])),_:2},1032,["src"])):(0,d.kq)("",!0),e.is_favorite&&1==e.is_favorite?((0,d.wg)(),(0,d.iD)("div",{key:1,class:"deals-item-favorite",onClick:t=>H.cancelFavorite(2,e.id,a)},[(0,d.Wm)(U,{color:"#6650B3",size:25},{default:(0,d.w5)((()=>[(0,d.Wm)(j)])),_:1})],8,v)):((0,d.wg)(),(0,d.iD)("div",{key:2,class:"deals-item-favorite",onClick:t=>H.addFavorite(e.id,2,e.title,e.company_logo,a)},[(0,d.Wm)(U,{size:25},{default:(0,d.w5)((()=>[(0,d.Wm)(O)])),_:1})],8,w))]),(0,d._)("div",y,[(0,d._)("div",k,[(0,d.Wm)(Y,{class:"deals-logo",src:e.company_logo,onClick:a=>H.viewProfile(e.user_id,e.identity,e.company_id)},null,8,["src","onClick"])]),(0,d._)("div",b,[e.company_info?((0,d.wg)(),(0,d.iD)("div",{key:0,class:"deals-item-c-r-1",onClick:a=>H.viewProfile(e.user_id,e.identity,e.company_id)},(0,c.zw)(e.company_info.company_name),9,C)):(0,d.kq)("",!0),(0,d._)("div",{class:"deals-item-c-r-2",onClick:a=>H.showDealDetailDialog(e)},(0,c.zw)(e.title),9,$)])]),(0,d._)("div",L,[(0,d._)("div",x,[e.company_info&&"0"!=e.company_info.category_name_en?((0,d.wg)(),(0,d.iD)(d.HY,{key:0},[(0,d.Uk)((0,c.zw)(e.company_info.category_name_en),1)],64)):((0,d.wg)(),(0,d.iD)(d.HY,{key:1},[],64))]),(0,d._)("div",S,[(0,d.Wm)(J,{link:"",onClick:a=>H.showDealDetailDialog(e)},{default:(0,d.w5)((()=>[W])),_:2},1032,["onClick"]),(0,d.Wm)(J,{link:"",onClick:a=>H.turnDealDetail(e.id)},{default:(0,d.w5)((()=>[I])),_:2},1032,["onClick"])])])])])))),128))]),(0,d._)("div",P,[(0,d.Wm)(N,{layout:"prev, pager, next","default-current-page":1,onSizeChange:H.dealPageSizeChange,onCurrentChange:H.dealPageChange,"current-page":V.dealPage,"page-size":V.dealLimit,total:V.dealTotalNum},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])],64)):((0,d.wg)(),(0,d.j4)(R,{key:1,description:"..."}))]),V.adsDataBottom.length>0?((0,d.wg)(),(0,d.iD)("div",q,[(0,d.Wm)(B,{height:V.adsHeight,adsData:V.adsDataBottom},null,8,["height","adsData"])])):(0,d.kq)("",!0)])),_:1},512)])),_:1})])),_:1}),(0,d.Wm)(G,{info:V.dealDetailData,qrcodeValue:V.qrcodeValue,onClose:a[0]||(a[0]=e=>V.dealDetailDialogVisible=!1),onShare:H.shareDeal,onViewProfile:H.viewProfile,visible:V.dealDetailDialogVisible},null,8,["info","qrcodeValue","onShare","onViewProfile","visible"]),(0,d.Wm)(E,{visible:V.shareDialogVisible,title:V.shareInfo.title,description:V.shareInfo.desc,quote:V.shareInfo.desc,url:V.shareUrl,onClose:a[1]||(a[1]=e=>V.shareDialogVisible=!1)},null,8,["visible","title","description","quote","url"])])])),[[X,V.showLoadingStatus]])}var V=t(41836),H=t(44276),z=t(6158),T=t.n(z),Z=t(19651),B=t.n(Z),A=t(42576),U={name:"index",components:{dealDetailCard:s.Z,shareCard:i.Z,dealFilterComponent:r.Z,featuredDealsPromoted:n.Z,adsComponent:o.Z},setup(){const e=window.location.origin;return{locationUrl:e}},data(){return{subCateData:[],locationValue:"",locationOptions:[],tagValue:[],tagsData:[],dealsListData:[],dealPage:1,dealLimit:10,dealTotalNum:0,sCateId:0,showLoadingStatus:!0,adsHeight:"190px",adsDataTop:[],adsDataMid:[],adsDataBottom:[],featuredDealsData:[],dealDetailDialogVisible:!1,dealDetailData:{},qrcodeValue:"",webDomain:"https://dev.edupassport.cn",showDealDetailStatus:!1,filterIsOnlineValue:!1,detailData:{},accessToken:"pk.eyJ1Ijoic3JrbGluZ2UiLCJhIjoiY2t2NnR4anI2OWU5NDJ3bWE1dHd3c3h1aSJ9.O0JfjqiyBBkFuf4G-DQ-DQ",mapStyle:"mapbox://styles/mapbox/streets-v11",shareDialogVisible:!1,shareInfo:{},shareUrl:"",filterResultData:{},companyInfo:{}}},beforeRouteUpdate(e){console.log(e)},unmounted(){(0,A.lJ)(),window.onresize=null},mounted(){let e=document.body.clientWidth,a=Math.floor(e);a<=768&&((0,A.lJ)(),this.adsHeight="160px"),a>=992&&a<1200&&(this.adsHeight="120px"),a>=1200&&a<1920&&(this.adsHeight="140px"),a>=1920&&(this.adsHeight="190px"),window.onresize=()=>{a<=768&&((0,A.lJ)(),this.adsHeight="160px"),a>=992&&a<1200&&(this.adsHeight="120px"),a>=1200&&a<1920&&(this.adsHeight="140px"),a>=1920&&(this.adsHeight="190px")};let t=this.$route.query.page;if(t){let e=Number(t);this.dealPage=Number(e),this.getDealsList(e,this.dealLimit)}else this.getDealsList(this.dealPage,this.dealLimit);this.getFeaturedDealsList(),this.getSubIdentityList(),this.getTagsList(),this.getDealsAreaList(),this.getAdsList()},methods:{addUserBrowsingHistory(e){let a={type:2,type_id:e};(0,V.Z7)(a).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))},confirmFilterSearch(e){console.log(e),this.filterResultData=e,this.dealPage=1,this.getDealsList(this.dealPage,this.dealLimit)},backToSearchResults(){this.showDealDetailStatus=!1,this.getDealsList(this.dealPage,this.dealLimit),this.getFeaturedDealsList()},readMoreDeal(e){this.showDealDetailStatus=!0,this.dealDetailDialogVisible=!1,this.$router.push({path:"/deals",query:{id:e}})},showDealDetailDialog(e){this.addUserBrowsingHistory(e.id),this.dealDetailData=e,this.dealDetailDialogVisible=!0,this.qrcodeValue=this.webDomain+"?id="+e.id},shareDeal(e){this.shareDialogVisible=!0,this.shareInfo=e,this.shareUrl=this.locationUrl+"/deals/detail?id="+e.id},viewProfile(e,a,t){this.$router.push({path:"/deals/vendor/profile",query:{uid:e,i:a,cid:t}})},turnBanner(e){if(console.log(e),""!=e)window.location.href=e;else{let e=localStorage.getItem("token");if(!e)return void window.open("https://salesiq.zoho.com/signaturesupport.ls?widgetcode=75672d291fd9d5fcab53ffa3194f32598809c21f9b5284cbaf3493087cdd2e0d1a2010ab7b6727677d37b27582c0e9c4","_blank");this.$router.push("/me/ads/platform")}},getAdsList(){let e={page:1,limit:1e4};(0,V.tb)(e).then((e=>{if(200==e.code){let a=[],t=[],i=[],s=localStorage.getItem("identity");s||(a=e.message.filter((e=>"guest_d1"==e.name)),t=e.message.filter((e=>"guest_d2"==e.name)),i=e.message.filter((e=>"guest_d3"==e.name))),1==s&&(a=e.message.filter((e=>"educator_d1"==e.name)),t=e.message.filter((e=>"educator_d2"==e.name)),i=e.message.filter((e=>"educator_d3"==e.name))),2!=s&&3!=s&&4!=s||(a=e.message.filter((e=>"business_d1"==e.name)),t=e.message.filter((e=>"business_d2"==e.name)),i=e.message.filter((e=>"business_d3"==e.name))),5==s&&(a=e.message.filter((e=>"vendor_d1"==e.name)),t=e.message.filter((e=>"vendor_d2"==e.name)),i=e.message.filter((e=>"vendor_d3"==e.name))),a.length>0&&(this.adsDataTop=a[0].data),t.length>0&&(this.adsDataMid=t[0].data),i.length>0&&(this.adsDataBottom=i[0].data)}})).catch((e=>{this.$message.error(e.msg)}))},turnDealDetail(e){this.$router.push({path:"/deals/detail",query:{id:e}})},getSubIdentityList(){let e={pid:5,tree:1};(0,V.cF)(e).then((e=>{console.log(e),200==e.code&&(this.subCateData=e.message)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},getTagsList(){let e={page:1,limit:1e3};(0,V.g_)(e).then((e=>{console.log(e),200==e.code&&(this.tagsData=e.message.data)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getDealsList(e,a){let t=this.filterResultData,i={page:e,limit:a},s=Object.assign(i,t);(0,V.BZ)(s).then((e=>{console.log(e),200==e.code&&(this.dealsListData=e.message.data,this.dealTotalNum=e.message.total,this.showLoadingStatus=!1)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getDealsAreaList(){(0,V.DP)({}).then((e=>{console.log(e),200==e.code&&(this.locationOptions=e.message)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},dealPageSizeChange(e){console.log(e)},dealPageChange(e){this.showLoadingStatus=!0,this.dealPage=e,this.getDealsList(e,this.dealLimit),this.$refs.dealScroll.scrollTo(0,0),this.$router.push({path:"/deals",query:{page:e}})},addFavorite(e,a,t,i,s){let l={token:localStorage.getItem("token"),type:a,type_id:e,type_title:t,type_url:i};(0,V.q8)(l).then((e=>{console.log(e),200==e.code&&(this.$message.success("Success"),this.dealsListData[s]["is_favorite"]=1)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},cancelFavorite(e,a,t){let i={token:localStorage.getItem("token"),type:e,type_id:a};(0,V.Bv)(i).then((e=>{console.log(e),200==e.code&&(this.dealsListData[t]["is_favorite"]=0)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},addFavoriteFeatured(e,a,t,i,s){let l={token:localStorage.getItem("token"),type:a,type_id:e,type_title:t,type_url:i};(0,V.q8)(l).then((e=>{console.log(e),200==e.code&&(this.$message.success("Success"),this.featuredDealsData[s]["is_favorite"]=1)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},cancelFavoriteFeatured(e,a,t){let i={token:localStorage.getItem("token"),type:e,type_id:a};(0,V.Bv)(i).then((e=>{console.log(e),200==e.code&&(this.featuredDealsData[t]["is_favorite"]=0)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},offerDeal(){let e=localStorage.getItem("token"),a=this;if(!e||""==e)return this.$msgbox({title:"Offer a Deal",message:"Before offer a deal, you need to log in",type:"warning",confirmButtonText:"Log in",callback(e){if(console.log(e),"confirm"===e){let e={path:"/deals",query:{id:a.$route.query.id}},t=(0,H.cv)(JSON.stringify(e));a.$router.push({path:"/login",query:{redirect_params:t}})}}});let t=localStorage.getItem("identity");if(5!=t)return this.$message.error("Oops! Your current identity is not an vendor, please switch to Vendor");a.$router.push({path:"/deals/offer",query:{}})},selectRole(e){this.$loading({text:"Loading..."});let a={user_id:localStorage.getItem("uid"),identity:e};(0,V.Vd)(a).then((a=>{let t=a.message.user_contact,i={},s={},l=t.is_educator,o=t.is_recruiting,n=t.is_school,r=t.is_other,d=t.is_vendor,c=e;1==c&&(l>10?(i=a.message.user_contact.educator_contact,this.changeIdentity(i.id,1,2),this.$loading().close()):(this.$loading().close(),this.$router.push({path:"/profile/contact/user",query:{i:1}}))),2==c&&(o>10?(s=a.message.user_contact.company,this.changeIdentity(s.id,2,2),this.$loading().close()):(this.$loading().close(),this.$router.push({path:"/profile/contact/user",query:{i:2}}),this.dialogBusinessAccountVisible=!1)),3==c&&(n>10?(s=a.message.user_contact.company,this.changeIdentity(s.id,3,2),this.$loading().close()):(this.$loading().close(),this.$router.push({path:"/profile/contact/user",query:{i:3}}),this.dialogBusinessAccountVisible=!1)),4==c&&(r>10?(s=a.message.user_contact.company,this.changeIdentity(s.id,4,2),this.$loading().close()):(this.$loading().close(),this.$router.push({path:"/profile/contact/user",query:{i:4}}),this.dialogBusinessAccountVisible=!1)),5==c&&(d>10?(s=a.message.user_contact.company,this.changeIdentity(s.id,5,2),this.$loading().close()):(this.$loading().close(),this.$router.push({path:"/profile/contact/user",query:{i:5}})))})).catch((e=>{console.log(e),this.$loading().close(),this.$message.error(e.msg)}))},changeIdentity(e,a,t){let i={company_id:e,language:t,identity:a};(0,V.bv)(i).then((t=>{if(200==t.code){this.$store.commit("allIdentityChanged",!0),localStorage.setItem("company_id",e),localStorage.setItem("identity",a);let i=JSON.stringify(t.message);localStorage.setItem("menuData",i),this.$store.commit("identity",a),this.$store.commit("menuData",t.message),this.$loading().close()}})).catch((e=>{console.log(e),this.$loading().close(),this.$message.error(e.msg)}))},getFeaturedDealsList(){let e={};(0,V.dV)(e).then((e=>{console.log(e),200==e.code&&(this.featuredDealsData=e.message)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getDealDetail(e){let a={deal_id:e,token:localStorage.getItem("token")};(0,V.kR)(a).then((e=>{console.log(e),200==e.code&&(this.detailData=e.message,this.showLoadingStatus=!1,this.initMap(e.message.lng,e.message.lat))})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},initMap(e,a){T().accessToken=this.accessToken;const t=new(T().Map)({container:"mapContainer",center:[e,a],style:this.mapStyle,zoom:12}),i=new(T().NavigationControl);t.addControl(i,"top-right");const s=new(T().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});t.addControl(s,"top-right");const l=new(B())({accessToken:this.accessToken,mapboxgl:T()});t.addControl(l,"top-left");const o=new(T().Marker);o.setLngLat([e,a]).addTo(t)}}},M=t(48118);const j=(0,M.Z)(U,[["render",F],["__scopeId","data-v-07f20de3"]]);var O=j}}]);
//# sourceMappingURL=4047.041594e1.js.map