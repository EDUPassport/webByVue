"use strict";(self["webpackChunkeslweb"]=self["webpackChunkeslweb"]||[]).push([[7414],{31842:function(e,a,t){var s=t(66252);const l={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 13 24",width:"1.2em",height:"1.2em"},i=(0,s._)("path",{fill:"currentColor",d:"M0 2.089v21.912l6.546-6.26l6.545 6.26V2.089A2.11 2.11 0 0 0 10.982 0l-.077.001h.004h-8.726L2.11 0A2.109 2.109 0 0 0 .001 2.088v.001z"},null,-1),o=[i];function n(e,a){return(0,s.wg)(),(0,s.iD)("svg",l,o)}a["Z"]={name:"fontisto-favorite",render:n}},58769:function(e,a,t){t.d(a,{Z:function(){return P}});var s=t(31842),l=t(66252),i=t(56612);const o=e=>((0,l.dD)("data-v-759ce8db"),e=e(),(0,l.Cn)(),e),n={class:"deals-featured-container"},d=o((()=>(0,l._)("div",{class:"deals-featured-label"}," Promoted ",-1))),r={class:"deals-featured-item"},c={class:"deals-item-bg"},g=["onClick"],m=["onClick"],u={class:"deals-item-c"},h={class:"deals-item-c-l"},D={class:"deals-item-c-r"},p=["onClick"],f=["onClick"],_=["onClick"],v={class:"deals-item-b"},w={class:"deals-item-b-l"},k={class:"deals-item-b-r"},y=(0,l.Uk)(" Quick View "),b=(0,l.Uk)(" Details "),C={key:0,class:"xll-ads-container"},L={class:"xll-ads"},W={class:"xll-ads-t"},I={class:"image-ads-slot"},S={class:"xll-ads-b"},F=["innerHTML"];function $(e,a,t,o,$,V){const x=(0,l.up)("el-image"),T=s.Z,P=(0,l.up)("el-icon"),z=(0,l.up)("CollectionTag"),Z=(0,l.up)("el-avatar"),q=(0,l.up)("el-button"),M=(0,l.up)("el-carousel-item"),U=(0,l.up)("el-carousel"),A=(0,l.up)("el-empty"),B=(0,l.up)("Picture"),J=(0,l.up)("el-scrollbar");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(J,{class:"deals-featured-scroll"},{default:(0,l.w5)((()=>[(0,l._)("div",n,[d,t.featuredData.length>0?((0,l.wg)(),(0,l.j4)(U,{key:0,style:{width:"100%",margin:"0 auto",overflow:"hidden"},height:"460px","indicator-position":"none"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.featuredData,((e,a)=>((0,l.wg)(),(0,l.j4)(M,{key:a},{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l._)("div",c,[(0,l.Wm)(x,{class:"deals-item-background-img",src:e.company_info.background_image?e.company_info.background_image:"",fit:"cover",onClick:a=>V.viewProfile(e.user_id,e.identity,e.company_id)},null,8,["src","onClick"]),e.is_favorite&&1==e.is_favorite?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"deals-item-favorite",onClick:t=>V.cancelFavorite(2,e.id,a)},[(0,l.Wm)(P,{color:"#6650B3",size:25},{default:(0,l.w5)((()=>[(0,l.Wm)(T)])),_:1})],8,g)):((0,l.wg)(),(0,l.iD)("div",{key:1,class:"deals-item-favorite",onClick:t=>V.addFavorite(e.id,2,e.title,e.company_logo,a)},[(0,l.Wm)(P,{size:25},{default:(0,l.w5)((()=>[(0,l.Wm)(z)])),_:1})],8,m))]),(0,l._)("div",u,[(0,l._)("div",h,[(0,l.Wm)(Z,{class:"deals-logo",src:e.company_logo,onClick:a=>V.viewProfile(e.user_id,e.identity,e.company_id)},null,8,["src","onClick"])]),(0,l._)("div",D,[(0,l._)("div",{class:"deals-item-c-r-1",onClick:a=>V.viewProfile(e.user_id,e.identity,e.company_id)},(0,i.zw)(e.company_info.company_name),9,p),(0,l._)("div",{class:"deals-item-c-r-2",onClick:a=>V.showDealDetailDialog(e)},(0,i.zw)(e.title),9,f),(0,l._)("div",{class:"deals-item-c-r-3",onClick:a=>V.showDealDetailDialog(e)},(0,i.zw)(e.desc),9,_),(0,l._)("div",v,[(0,l._)("div",w,[e.company_info.category_name_en&&"0"!=e.company_info.category_name_en?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Uk)((0,i.zw)(e.company_info.category_name_en),1)],64)):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[],64))]),(0,l._)("div",k,[(0,l.Wm)(q,{link:"",onClick:a=>V.showDealDetailDialog(e)},{default:(0,l.w5)((()=>[y])),_:2},1032,["onClick"]),(0,l.Wm)(q,{link:"",onClick:a=>V.turnDealDetail(e.id)},{default:(0,l.w5)((()=>[b])),_:2},1032,["onClick"])])])])])])])),_:2},1024)))),128))])),_:1})):((0,l.wg)(),(0,l.j4)(A,{key:1,description:"..."}))]),t.adsData.length>0?((0,l.wg)(),(0,l.iD)("div",C,[(0,l.Wm)(U,{style:{width:"100%",margin:"0 auto",overflow:"hidden"},height:"360px","indicator-position":"none"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.adsData,((e,a)=>((0,l.wg)(),(0,l.j4)(M,{class:"xll-ads-swiper-item",key:a,onClick:a=>V.turnAdsDetail(e.link)},{default:(0,l.w5)((()=>[(0,l._)("div",L,[(0,l._)("div",W,[(0,l.Wm)(x,{class:"xll-ads-img",fit:"cover",src:""!=e.user_url?e.user_url:e.url},{error:(0,l.w5)((()=>[(0,l._)("div",I,[(0,l.Wm)(P,{size:80,color:"#808080"},{default:(0,l.w5)((()=>[(0,l.Wm)(B)])),_:1})])])),_:2},1032,["src"])]),(0,l._)("div",S,[(0,l._)("div",{class:"xll-ads-b-bg",innerHTML:e.title},null,8,F)])])])),_:2},1032,["onClick"])))),128))])),_:1})])):(0,l.kq)("",!0)])),_:1})])}var V={name:"featuredDealsPromoted",props:["featuredData","adsData"],data(){return{}},methods:{viewProfile(e,a,t){this.$emit("viewProfile",e,a,t)},showDealDetailDialog(e){this.$emit("detail",e)},addFavorite(e,a,t,s,l){this.$emit("addFavorite",e,a,t,s,l)},cancelFavorite(e,a,t){this.$emit("cancelFavorite",e,a,t)},turnAdsDetail(e){window.open(e,"_blank")},turnDealDetail(e){this.$emit("dealDetail",e)}}},x=t(48118);const T=(0,x.Z)(V,[["render",$],["__scopeId","data-v-759ce8db"]]);var P=T},21654:function(e,a,t){t.d(a,{Z:function(){return p}});var s=t(66252);const l=e=>((0,s.dD)("data-v-fbfa192c"),e=e(),(0,s.Cn)(),e),i={class:"map-container"},o=l((()=>(0,s._)("div",{id:"mapContainer",class:"basemap"},null,-1))),n=[o];function d(e,a,t,l,o,d){return(0,s.wg)(),(0,s.iD)("div",i,n)}var r=t(6158),c=t.n(r),g=t(19651),m=t.n(g),u={name:"mapComponent",props:["lat","lng"],setup(){return{}},data(){return{accessToken:"pk.eyJ1Ijoic3JrbGluZ2UiLCJhIjoiY2t2NnR4anI2OWU5NDJ3bWE1dHd3c3h1aSJ9.O0JfjqiyBBkFuf4G-DQ-DQ",mapStyle:"mapbox://styles/mapbox/streets-v11"}},mounted(){let e=this;setTimeout((function(){e.initMap(e.lng,e.lat)}),2e3)},methods:{initMap(e,a){c().accessToken=this.accessToken;const t=new(c().Map)({container:"mapContainer",center:[e,a],style:this.mapStyle,zoom:12}),s=new(c().NavigationControl);t.addControl(s,"top-right");const l=new(c().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});t.addControl(l,"top-right");const i=new(m())({accessToken:this.accessToken,mapboxgl:c()});t.addControl(i,"top-left");const o=new(c().Marker);o.setLngLat([e,a]).addTo(t)}}},h=t(48118);const D=(0,h.Z)(u,[["render",d],["__scopeId","data-v-fbfa192c"]]);var p=D},91354:function(e,a,t){t.r(a),t.d(a,{default:function(){return J}});var s=t(92047),l=t(7976),i=t(21654),o=t(58769),n=t(36774),d=t(66252),r=t(56612);const c=e=>((0,d.dD)("data-v-3186f8e1"),e=e(),(0,d.Cn)(),e),g={class:"bg"},m={class:"xll-container"},u={class:"dialog-container"},h={class:"action-container"},D={class:"action-l"},p=(0,d.Uk)(" BACK "),f=c((()=>(0,d._)("div",{class:"action-r"},null,-1))),_={class:"dialog-t"},v={class:"img-slot-background"},w={class:"dialog-b"},k={class:"dialog-b-l"},y={class:"dialog-logo"},b=c((()=>(0,d._)("div",{class:"dialog-qrcode"},null,-1))),C={class:"dialog-b-r"},L={class:"dialog-company-name"},W={class:"dialog-company-desc"},I={class:"dialog-title"},S={class:"dialog-desc"},F={class:"dialog-category"},$={class:"share-btn-container"},V=(0,d.Uk)(" SHARE ");function x(e,a,t,c,x,T){const P=n.Z,z=(0,d.up)("el-col"),Z=o.Z,q=(0,d.up)("ArrowLeft"),M=(0,d.up)("el-icon"),U=(0,d.up)("el-button"),A=(0,d.up)("Picture"),B=(0,d.up)("el-image"),J=(0,d.up)("el-avatar"),H=i.Z,j=(0,d.up)("el-space"),O=(0,d.up)("el-scrollbar"),R=(0,d.up)("el-row"),N=l.Z,Y=s.Z,E=(0,d.Q2)("loading");return(0,d.wy)(((0,d.wg)(),(0,d.iD)("div",g,[(0,d._)("div",m,[(0,d.Wm)(R,{gutter:0,align:"top",justify:"center"},{default:(0,d.w5)((()=>[(0,d.Wm)(z,{xs:0,sm:24,md:4,lg:4,xl:4},{default:(0,d.w5)((()=>[(0,d.Wm)(P,{locationData:x.locationOptions,tagsData:x.tagsData,subCateData:x.subCateData,onSearch:T.confirmFilterSearch},null,8,["locationData","tagsData","subCateData","onSearch"])])),_:1}),(0,d.Wm)(z,{xs:0,sm:24,md:7,lg:7,xl:6},{default:(0,d.w5)((()=>[(0,d.Wm)(Z,{adsData:x.adsDataMid,featuredData:x.featuredDealsData,onAddFavorite:T.addFavoriteFeatured,onCancelFavorite:T.cancelFavoriteFeatured,onViewProfile:T.viewProfile,onDetail:T.showDealDetailDialog,onDealDetail:T.turnDealDetail},null,8,["adsData","featuredData","onAddFavorite","onCancelFavorite","onViewProfile","onDetail","onDealDetail"])])),_:1}),(0,d.Wm)(z,{class:"deal-detail-col",xs:24,sm:24,md:13,lg:13,xl:14},{default:(0,d.w5)((()=>[(0,d.Wm)(O,{class:"deal-detail-scroll"},{default:(0,d.w5)((()=>[(0,d._)("div",u,[(0,d._)("div",h,[(0,d._)("div",D,[(0,d.Wm)(U,{class:"",onClick:a[0]||(a[0]=e=>T.backToSearchResults()),link:""},{default:(0,d.w5)((()=>[(0,d.Wm)(M,null,{default:(0,d.w5)((()=>[(0,d.Wm)(q)])),_:1}),p])),_:1})]),f]),(0,d._)("div",_,[(0,d.Wm)(B,{class:"dialog-background-img",fit:"cover",src:x.companyInfo.background_image},{error:(0,d.w5)((()=>[(0,d._)("div",v,[(0,d.Wm)(M,{size:80,color:"#808080"},{default:(0,d.w5)((()=>[(0,d.Wm)(A)])),_:1})])])),_:1},8,["src"])]),(0,d._)("div",w,[(0,d._)("div",k,[(0,d._)("div",y,[(0,d.Wm)(J,{class:"dialog-logo-img",src:x.companyInfo.logo},null,8,["src"])]),b]),(0,d._)("div",C,[(0,d._)("div",L,(0,r.zw)(x.detailData.company_name),1),(0,d._)("p",W,(0,r.zw)(x.companyInfo.desc),1),(0,d._)("div",{class:"dialog-vendor-profile",onClick:a[1]||(a[1]=e=>T.readMoreDeal(x.detailData.user_id,x.detailData.identity,x.detailData.company_id))}," VENDOR PROFILE "),(0,d._)("div",I,(0,r.zw)(x.detailData.title),1),(0,d._)("p",S,(0,r.zw)(x.detailData.desc),1),2==x.detailData.is_online||3==x.detailData.is_online?((0,d.wg)(),(0,d.j4)(H,{key:0,lng:x.detailData.lng,lat:x.detailData.lat},null,8,["lng","lat"])):(0,d.kq)("",!0),(0,d._)("div",F,[(0,d.Wm)(j,{size:5,wrap:"",spacer:"Â·"},{default:(0,d.w5)((()=>[(0,d._)("span",null,(0,r.zw)(x.companyInfo.category_name_en),1)])),_:1})]),(0,d._)("div",$,[(0,d.Wm)(U,{link:"",onClick:a[2]||(a[2]=e=>T.shareDeal(x.detailData))},{default:(0,d.w5)((()=>[V])),_:1})])])])])])),_:1})])),_:1})])),_:1}),(0,d.Wm)(N,{info:x.dealDetailData,qrcodeValue:x.qrcodeValue,onClose:a[3]||(a[3]=e=>x.dealDetailDialogVisible=!1),onShare:T.shareDeal,onViewProfile:T.viewProfile,visible:x.dealDetailDialogVisible},null,8,["info","qrcodeValue","onShare","onViewProfile","visible"]),(0,d.Wm)(Y,{visible:x.shareDialogVisible,title:x.shareInfo.title,description:x.shareInfo.desc,quote:x.shareInfo.desc,url:c.locationUrl,onClose:a[4]||(a[4]=e=>x.shareDialogVisible=!1)},null,8,["visible","title","description","quote","url"])])])),[[E,x.showLoadingStatus]])}var T=t(41836),P=t(6158),z=t.n(P),Z=t(19651),q=t.n(Z),M=t(42576),U={name:"detail",components:{shareCard:s.Z,dealFilterComponent:n.Z,featuredDealsPromoted:o.Z,dealDetailCard:l.Z},setup(){const e=window.location.href;return{locationUrl:e}},data(){return{subCateData:[],locationValue:"",locationOptions:[],tagValue:[],tagsData:[],dealsListData:[],dealPage:1,dealLimit:10,dealTotalNum:0,sCateId:0,showLoadingStatus:!0,dealDetailDialogVisible:!1,dealDetailData:{},qrcodeValue:"",webDomain:"https://dev.edupassport.cn",filterIsOnlineValue:!1,detailData:{},accessToken:"pk.eyJ1Ijoic3JrbGluZ2UiLCJhIjoiY2t2NnR4anI2OWU5NDJ3bWE1dHd3c3h1aSJ9.O0JfjqiyBBkFuf4G-DQ-DQ",mapStyle:"mapbox://styles/mapbox/streets-v11",shareDialogVisible:!1,shareInfo:{},filterResultData:{},companyInfo:{},featuredDealsData:[],adsDataMid:[]}},beforeRouteUpdate(e){console.log(e);let a=e.query.id;a&&(this.getDealDetail(a),this.addUserBrowsingHistory(a))},unmounted(){(0,M.lJ)(),window.onresize=null},mounted(){let e=document.body.clientWidth,a=Math.floor(e);a<=768&&(0,M.lJ)(),window.onresize=()=>{a<=768&&(0,M.lJ)()};let t=this.$route.query.id;t&&(this.getDealDetail(t),this.addUserBrowsingHistory(t)),this.getFeaturedDealsList(),this.getSubIdentityList(),this.getTagsList(),this.getDealsAreaList(),this.getAdsList()},methods:{addUserBrowsingHistory(e){let a={type:2,type_id:e};(0,T.Z7)(a).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))},confirmFilterSearch(e){console.log(e),this.filterResultData=e,this.getDealsList(this.dealPage,this.dealLimit)},backToSearchResults(){this.$router.go(-1)},readMoreDeal(e,a,t){this.$router.push({path:"/deals/vendor/profile",query:{uid:e,i:a,cid:t}})},showDealDetailDialog(e){this.dealDetailData=e,this.dealDetailDialogVisible=!0,this.qrcodeValue=this.webDomain+"?id="+e.id},turnDealDetail(e){this.$router.push({path:"/deals/detail",query:{id:e}})},shareDeal(e){this.shareDialogVisible=!0,this.shareInfo=e},viewProfile(e,a,t){this.$loading({text:""});let s={user_id:e,identity:a,company_id:t};(0,T.Vd)(s).then((e=>{console.log(e),200==e.code&&(this.companyInfo=e.message.user_contact.company,this.showDealDetailStatus=!0,this.dealDetailDialogVisible=!1,this.$loading().close())})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},turnBanner(e){if(console.log(e),""!=e)window.location.href=e;else{let e=localStorage.getItem("token");if(!e)return void window.open("https://salesiq.zoho.com/signaturesupport.ls?widgetcode=75672d291fd9d5fcab53ffa3194f32598809c21f9b5284cbaf3493087cdd2e0d1a2010ab7b6727677d37b27582c0e9c4","_blank");this.$router.push("/me/ads/platform")}},getAdsList(){let e={page:1,limit:1e4};(0,T.tb)(e).then((e=>{if(200==e.code){let a=[],t=[],s=[],l=localStorage.getItem("identity");l||(a=e.message.filter((e=>"guest_d1"==e.name)),t=e.message.filter((e=>"guest_d2"==e.name)),s=e.message.filter((e=>"guest_d3"==e.name))),1==l&&(a=e.message.filter((e=>"educator_d1"==e.name)),t=e.message.filter((e=>"educator_d2"==e.name)),s=e.message.filter((e=>"educator_d3"==e.name))),2!=l&&3!=l&&4!=l||(a=e.message.filter((e=>"business_d1"==e.name)),t=e.message.filter((e=>"business_d2"==e.name)),s=e.message.filter((e=>"business_d3"==e.name))),5==l&&(a=e.message.filter((e=>"vendor_d1"==e.name)),t=e.message.filter((e=>"vendor_d2"==e.name)),s=e.message.filter((e=>"vendor_d3"==e.name))),a.length>0&&(this.adsDataTop=a[0].data),t.length>0&&(this.adsDataMid=t[0].data),s.length>0&&(this.adsDataBottom=s[0].data)}})).catch((e=>{this.$message.error(e.msg)}))},getSubIdentityList(){let e={pid:5,tree:1};(0,T.cF)(e).then((e=>{console.log(e),200==e.code&&(this.subCateData=e.message)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},getTagsList(){let e={page:1,limit:1e3};(0,T.g_)(e).then((e=>{console.log(e),200==e.code&&(this.tagsData=e.message.data)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getDealsList(e,a){let t=this.filterResultData,s={page:e,limit:a},l=Object.assign(s,t);(0,T.BZ)(l).then((e=>{console.log(e),200==e.code&&(this.dealsListData=e.message.data,this.dealTotalNum=e.message.total,this.showLoadingStatus=!1)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getDealsAreaList(){(0,T.DP)({}).then((e=>{console.log(e),200==e.code&&(this.locationOptions=e.message)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},dealPageSizeChange(e){console.log(e)},dealPageChange(e){this.showLoadingStatus=!0,this.dealPage=e,this.getDealsList(e,this.dealLimit),document.documentElement.scrollTop=200},addFavorite(e,a,t,s,l){let i={token:localStorage.getItem("token"),type:a,type_id:e,type_title:t,type_url:s};(0,T.q8)(i).then((e=>{console.log(e),200==e.code&&(this.$message.success("Success"),this.dealsListData[l]["is_favorite"]=1)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},cancelFavorite(e,a,t){let s={token:localStorage.getItem("token"),type:e,type_id:a};(0,T.Bv)(s).then((e=>{console.log(e),200==e.code&&(this.dealsListData[t]["is_favorite"]=0)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},addFavoriteFeatured(e,a,t,s,l){let i={token:localStorage.getItem("token"),type:a,type_id:e,type_title:t,type_url:s};(0,T.q8)(i).then((e=>{console.log(e),200==e.code&&(this.$message.success("Success"),this.featuredDealsData[l]["is_favorite"]=1)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},cancelFavoriteFeatured(e,a,t){let s={token:localStorage.getItem("token"),type:e,type_id:a};(0,T.Bv)(s).then((e=>{console.log(e),200==e.code&&(this.featuredDealsData[t]["is_favorite"]=0)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getFeaturedDealsList(){let e={};(0,T.dV)(e).then((e=>{console.log(e),200==e.code&&(this.featuredDealsData=e.message)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getDealDetail(e){let a={deal_id:e,token:localStorage.getItem("token")},t=this;(0,T.kR)(a).then((e=>{console.log(e),200==e.code&&(this.detailData=e.message,this.companyInfo=e.message.company,2!=e.message.is_online&&3!=e.message.is_online||setTimeout((function(){t.initMap(e.message.lng,e.message.lat)}),3e3),this.showLoadingStatus=!1)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},initMap(e,a){z().accessToken=this.accessToken;const t=new(z().Map)({container:"mapContainer",center:[e,a],style:this.mapStyle,zoom:12}),s=new(z().NavigationControl);t.addControl(s,"top-right");const l=new(z().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});t.addControl(l,"top-right");const i=new(q())({accessToken:this.accessToken,mapboxgl:z()});t.addControl(i,"top-left");const o=new(z().Marker);o.setLngLat([e,a]).addTo(t)}}},A=t(48118);const B=(0,A.Z)(U,[["render",x],["__scopeId","data-v-3186f8e1"]]);var J=B}}]);
//# sourceMappingURL=7414.0a64231a.js.map