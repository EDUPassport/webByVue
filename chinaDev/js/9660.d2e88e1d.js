"use strict";(self["webpackChunkeslweb"]=self["webpackChunkeslweb"]||[]).push([[9660],{3755:function(a,e,i){var t=i(2482),n=i(1836);class o{constructor(){(0,t.Z)(this,"users",[{id:"08c0a6ec-a42b-47b2-bb1e-15e0f5f9a19a",name:"Mattie",password:"123",avatar:"/static/images/Avatar-1.png",email:"Mattie@goeasy.io",phone:"138xxxxxxxx"},{id:"3bb179af-bcc5-4fe0-9dac-c05688484649",name:"Wallace",password:"123",avatar:"/static/images/Avatar-2.png",email:"Wallace@goeasy.io",phone:"138xxxxxxxx"},{id:"fdee46b0-4b01-4590-bdba-6586d7617f95",name:"Tracy",password:"123",avatar:"/static/images/Avatar-3.png",email:"Tracy@goeasy.io",phone:"138xxxxxxxx"},{id:"33c3693b-dbb0-4bc9-99c6-fa77b9eb763f",name:"Juanita",password:"123",avatar:"/static/images/Avatar-4.png",email:"Juanita@goeasy.io",phone:"138xxxxxxxx"}]),(0,t.Z)(this,"groups",[{id:"group-a42b-47b2-bb1e-15e0f5f9a19a",name:"小程序交流群",avatar:"/static/images/wx.png",userList:["08c0a6ec-a42b-47b2-bb1e-15e0f5f9a19a","3bb179af-bcc5-4fe0-9dac-c05688484649","fdee46b0-4b01-4590-bdba-6586d7617f95","33c3693b-dbb0-4bc9-99c6-fa77b9eb763f"]},{id:"group-4b01-4590-bdba-6586d7617f95",name:"UniApp交流群",avatar:"/static/images/uniapp.png",userList:["08c0a6ec-a42b-47b2-bb1e-15e0f5f9a19a","fdee46b0-4b01-4590-bdba-6586d7617f95","33c3693b-dbb0-4bc9-99c6-fa77b9eb763f"]},{id:"group-dbb0-4bc9-99c6-fa77b9eb763f",name:"GoEasy交流群",avatar:"/static/images/goeasy.jpeg",userList:["08c0a6ec-a42b-47b2-bb1e-15e0f5f9a19a","3bb179af-bcc5-4fe0-9dac-c05688484649"]}]),(0,t.Z)(this,"orders",[{id:"252364104325",url:"/static/images/goods1-1.jpg",name:"青桔柠檬气泡美式",price:"￥23",count:1},{id:"251662058022",url:"/static/images/goods1-2.jpg",name:"咸柠七",price:"￥8",count:2},{id:"250676186141",url:"/static/images/goods1-3.jpg",name:"黑糖波波鲜奶茶",price:"￥12",count:1}])}findUsers(){return this.users}async findFriends(){let a={identity:1},e=await(0,n.ky)(a);return e.message}findGroups(a){return this.groups.filter((e=>e.userList.find((e=>e===a.id))))}findUser(a,e){return this.users.find((i=>i.name===a&&i.password===e))}getOrderList(){return this.orders}findGroupById(a){return this.groups.find((e=>e.id===a))}findUserById(a,e,i){let t={user_id:a,identity:e,company_id:i},o={};return(0,n.Vd)(t).then((a=>{if(200==a.code){let i="",t="https://oss.esl-passport.cn/educator.png";if(1==e){let e=a.message.user_contact;e&&(i=e.first_name+""+e.last_name,e.headimgurl&&(t=e.headimgurl))}if(2==e||3==e||4==e||5==e){let e=a.message.user_contact.company;e&&(i=e.display_name),e&&e.logo&&(t=e.logo)}o={name:i,avatar:t}}else console.log("获取用户信息失败")})).catch((a=>{console.log(a)})),o}findGroupMembers(a){let e=[],i=this.groups.find((e=>e.id===a));return this.users.map((a=>{i.userList.find((e=>e===a.id)),e.push(a)})),e}findGroupMemberAvatars(a){let e=[],i=this.groups.find((e=>e.id===a));return this.users.map((a=>{i.userList.forEach((i=>{a.id===i&&e.push(a.avatar)}))})),e}}e["Z"]=new o},9660:function(a,e,i){i.r(e),i.d(e,{default:function(){return ia}});var t=i(6252),n=i(6612);const o=a=>((0,t.dD)("data-v-60e53b49"),a=a(),(0,t.Cn)(),a),r={class:"contact"},s={class:"contact-left"},c=o((()=>(0,t._)("div",{class:"contact-list-title"},"History",-1))),d={class:"friend-list"},l=["onClick"],f={class:"friend-avatar"},_={class:"friend"},u={class:"friend-name"},m={class:"friend-mail"},p=["onClick"],g={class:"friend-avatar"},b={class:"friend"},v={class:"friend-name"},y={class:"friend-mail"},w={class:"contact-main"},k={key:0,class:"profile-card"},h={class:"profile-card-title"},x={class:"profile-name-container"},C={class:"profile-name"},D={class:"profile-avatar"},z={class:"friend-info"},U=o((()=>(0,t._)("div",{class:"info-name"},"Email",-1))),H={class:"info-text"},Y={class:"button-box"},j=(0,t.Uk)("Send Message"),M={key:0,class:"profile-card-drawer"},L={class:"profile-card-title"},W={class:"profile-name-container"},Z={class:"profile-name"},q={class:"profile-avatar"},A={class:"friend-info"},P=o((()=>(0,t._)("div",{class:"info-name"},"Email",-1))),F={class:"info-text"},G={class:"button-box"},E=(0,t.Uk)("Send Message"),I={key:1,class:"profile-card"},J={class:"group-profile-name"},K={class:"group-members"},O=["src"],S={class:"member-name"},B={class:"button-box"};function N(a,e,i,o,N,R){const T=(0,t.up)("el-avatar"),V=(0,t.up)("el-empty"),Q=(0,t.up)("el-button"),X=(0,t.up)("el-drawer");return(0,t.wg)(),(0,t.iD)("div",r,[(0,t._)("div",s,[c,(0,t._)("div",d,[o.friends.length>0?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.friends||[],((a,e)=>((0,t.wg)(),(0,t.iD)("div",{key:e,class:(0,n.C_)(["friend-item",{actived:o.profile.friend&&o.profile.friend.id===a.to_user_contact_info.to_company_info.id}]),onClick:e=>o.showFriendProfile(a,1)},[(0,t._)("div",f,[1===a.to_identity?((0,t.wg)(),(0,t.j4)(T,{key:0,class:"friend-avatar-img",src:a.to_user_contact_info.headimgurl},null,8,["src"])):((0,t.wg)(),(0,t.j4)(T,{key:1,class:"friend-avatar-img",src:a.to_user_contact_info.to_company_info.logo},null,8,["src"]))]),(0,t._)("div",_,[(0,t._)("div",u,[1===a.to_identity?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t.Uk)((0,n.zw)(a.to_user_contact_info.to_company_info.name),1)],64)):((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[(0,t.Uk)((0,n.zw)(a.to_user_contact_info.to_company_info.company_name),1)],64))]),(0,t._)("div",m,[1===a.to_identity?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t.Uk)((0,n.zw)(a.to_user_contact_info.to_company_info.email),1)],64)):((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[(0,t.Uk)((0,n.zw)(a.to_user_contact_info.to_company_info.work_email),1)],64))])])],10,l)))),128)),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.friends||[],((a,e)=>((0,t.wg)(),(0,t.iD)("div",{key:e,class:(0,n.C_)(["friend-item-mobile",{actived:o.profile.friend&&o.profile.friend.id===a.to_user_contact_info.to_company_info.id}]),onClick:e=>o.showFriendProfile(a,2)},[(0,t._)("div",g,[1===a.to_identity?((0,t.wg)(),(0,t.j4)(T,{key:0,class:"friend-avatar-img",src:a.to_user_contact_info.headimgurl},null,8,["src"])):((0,t.wg)(),(0,t.j4)(T,{key:1,class:"friend-avatar-img",src:a.to_user_contact_info.to_company_info.logo},null,8,["src"]))]),(0,t._)("div",b,[(0,t._)("div",v,[1===a.to_identity?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t.Uk)((0,n.zw)(a.to_user_contact_info.to_company_info.name),1)],64)):((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[(0,t.Uk)((0,n.zw)(a.to_user_contact_info.to_company_info.company_name),1)],64))]),(0,t._)("div",y,[1===a.to_identity?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t.Uk)((0,n.zw)(a.to_user_contact_info.to_company_info.email),1)],64)):((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[(0,t.Uk)((0,n.zw)(a.to_user_contact_info.to_company_info.work_email),1)],64))])])],10,p)))),128))],64)):((0,t.wg)(),(0,t.j4)(V,{key:1,style:{"font-size":"14px"},description:"No History"}))])]),(0,t._)("div",w,[o.profile.friend?.name?((0,t.wg)(),(0,t.iD)("div",k,[(0,t._)("div",h,[(0,t._)("div",x,[(0,t._)("div",C,(0,n.zw)(o.profile.friend.name),1)]),(0,t._)("div",D,[(0,t.Wm)(T,{src:o.profile.friend.avatar},null,8,["src"])])]),(0,t._)("div",z,[U,(0,t._)("div",H,(0,n.zw)(o.profile.friend.email),1)]),(0,t._)("div",Y,[(0,t.Wm)(Q,{class:"card-button",type:"primary",round:"",onClick:o.privateChat},{default:(0,t.w5)((()=>[j])),_:1},8,["onClick"])])])):(0,t.kq)("",!0),(0,t.Wm)(X,{"model-value":o.visible,direction:"rtl",size:"50%",onClose:e[0]||(e[0]=a=>o.closeMobileProfileCard())},{default:(0,t.w5)((()=>[o.profile.friend?.name?((0,t.wg)(),(0,t.iD)("div",M,[(0,t._)("div",L,[(0,t._)("div",W,[(0,t._)("div",Z,(0,n.zw)(o.profile.friend.name),1)]),(0,t._)("div",q,[(0,t.Wm)(T,{src:o.profile.friend.avatar},null,8,["src"])])]),(0,t._)("div",A,[P,(0,t._)("div",F,(0,n.zw)(o.profile.friend.email),1)]),(0,t._)("div",G,[(0,t.Wm)(Q,{class:"card-button",type:"primary",round:"",onClick:o.privateChat},{default:(0,t.w5)((()=>[E])),_:1},8,["onClick"])])])):(0,t.kq)("",!0)])),_:1},8,["model-value"]),o.profile.group?.name?((0,t.wg)(),(0,t.iD)("div",I,[(0,t._)("div",J,(0,n.zw)(o.profile.group.name),1),(0,t._)("div",K,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.profile.group.members,((a,e)=>((0,t.wg)(),(0,t.iD)("div",{class:"member",key:e},[(0,t._)("img",{class:"member-avatar",src:a.avatar},null,8,O),(0,t._)("span",S,(0,n.zw)(a.name),1)])))),128))]),(0,t._)("div",B,[(0,t._)("button",{class:"card-button",onClick:e[1]||(e[1]=(...a)=>o.groupChat&&o.groupChat(...a))},"发消息")])])):(0,t.kq)("",!0)])])}var R=i(2931),T=i(8339),V=i(3907),Q=i(3755),X=i(4276),$={async setup(){const a=(0,T.tv)(),e=(0,V.oR)(),i=e.state.currentUser,t=await Q.Z.findFriends(i);let n=(0,R.qj)({friend:{},group:{}});const o=(0,R.iH)(!1);function r(a,e){n.group={},1===a.to_identity?n.friend={id:a.to_user_contact_info.to_company_info.id,uid:a.to_user_id,identity:a.to_identity,company_id:a.to_company_id,name:a.to_user_contact_info.to_company_info.name,avatar:a.to_user_contact_info.headimgurl,email:a.to_user_contact_info.to_company_info.email}:n.friend={id:a.to_user_contact_info.to_company_info.id,uid:a.to_user_id,identity:a.to_identity,company_id:a.to_company_id,name:a.to_user_contact_info.to_company_info.company_name,avatar:a.to_user_contact_info.to_company_info.logo,email:a.to_user_contact_info.to_company_info.work_email},1===e&&(o.value=!1),2===e&&(o.value=!0)}function s(){let e="/chat/messages/privatechat/"+n.friend.uid,i=n.friend.uid+"#"+n.friend.identity+"#"+n.friend.company_id,t={uuid:i,name:n.friend.name,avatar:n.friend.avatar};a.replace({path:e,query:{str:encodeURI((0,X.cv)(JSON.stringify(t)))}})}function c(){a.replace({path:"/conversations/groupchat/"+n.group.id,query:{name:n.group.name,avatar:n.group.avatar}})}function d(){o.value=!1}return{visible:o,friends:t,profile:n,showFriendProfile:r,privateChat:s,groupChat:c,closeMobileProfileCard:d}}},aa=i(8118);const ea=(0,aa.Z)($,[["render",N],["__scopeId","data-v-60e53b49"]]);var ia=ea},2482:function(a,e,i){function t(a,e,i){return e in a?Object.defineProperty(a,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[e]=i,a}i.d(e,{Z:function(){return t}})}}]);
//# sourceMappingURL=9660.d2e88e1d.js.map