{"version":3,"file":"js/6252.b9cee655.js","mappings":"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","sources":["webpack://eslweb/./src/views/chat/Conversations.vue?43d8","webpack://eslweb/./src/views/chat/Conversations.vue","webpack://eslweb/./src/views/chat/Conversations.vue?dc54"],"sourcesContent":["import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-edcf71fc\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"conversations\"\n};\nconst _hoisted_2 = {\n  class: \"conversation-list\"\n};\nconst _hoisted_3 = {\n  class: \"conversation-list-container\"\n};\nconst _hoisted_4 = {\n  class: \"conversation-list-top\"\n};\nconst _hoisted_5 = {\n  class: \"conversation-list-top-label\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Recent Messages\", -1));\n\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" History \");\n\nconst _hoisted_8 = {\n  class: \"conversation-list-top-search\"\n};\nconst _hoisted_9 = {\n  class: \"conversation-list-content\"\n};\nconst _hoisted_10 = {\n  key: 0\n};\nconst _hoisted_11 = [\"onContextmenu\"];\nconst _hoisted_12 = {\n  class: \"avatar\"\n};\nconst _hoisted_13 = {\n  key: 0,\n  class: \"unread-count\"\n};\nconst _hoisted_14 = {\n  class: \"unread\"\n};\nconst _hoisted_15 = {\n  class: \"conversation-message\"\n};\nconst _hoisted_16 = {\n  class: \"conversation-top\"\n};\nconst _hoisted_17 = {\n  class: \"conversation-name\"\n};\nconst _hoisted_18 = {\n  class: \"conversation-time\"\n};\nconst _hoisted_19 = {\n  class: \"conversation-bottom\"\n};\nconst _hoisted_20 = {\n  key: 0,\n  class: \"conversation-content\"\n};\nconst _hoisted_21 = {\n  key: 0\n};\nconst _hoisted_22 = {\n  key: 1\n};\nconst _hoisted_23 = {\n  key: 1,\n  class: \"conversation-content\"\n};\nconst _hoisted_24 = {\n  key: 0,\n  class: \"unread-text\"\n};\nconst _hoisted_25 = {\n  key: 1\n};\nconst _hoisted_26 = {\n  key: 2\n};\nconst _hoisted_27 = {\n  key: 3,\n  class: \"text\"\n};\nconst _hoisted_28 = {\n  key: 4\n};\nconst _hoisted_29 = {\n  key: 5\n};\nconst _hoisted_30 = {\n  key: 6\n};\nconst _hoisted_31 = {\n  key: 7\n};\nconst _hoisted_32 = {\n  key: 8\n};\nconst _hoisted_33 = {\n  key: 1,\n  class: \"no-conversation\"\n};\nconst _hoisted_34 = {\n  class: \"chat\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_option = _resolveComponent(\"el-option\");\n\n  const _component_el_select = _resolveComponent(\"el-select\");\n\n  const _component_el_avatar = _resolveComponent(\"el-avatar\");\n\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n\n  const _component_router_view = _resolveComponent(\"router-view\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _createVNode(_component_el_button, {\n    type: \"primary\",\n    round: \"\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.turnHistory())\n  }, {\n    default: _withCtx(() => [_hoisted_7]),\n    _: 1\n  })]), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_el_select, {\n    modelValue: $setup.chatSearchValue,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.chatSearchValue = $event),\n    filterable: \"\",\n    clearable: \"\",\n    remote: \"\",\n    \"reserve-keyword\": \"\",\n    \"remote-method\": $setup.chatSearchRemoteMethod,\n    loading: $setup.chatSearchLoading,\n    placeholder: \"Search chats\",\n    onChange: $setup.chatLocationChange\n  }, {\n    default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.chatSearchConversationData, conversation => {\n      return _openBlock(), _createBlock(_component_el_option, {\n        key: conversation.userId,\n        label: conversation.data.name,\n        value: conversation\n      }, null, 8, [\"label\", \"value\"]);\n    }), 128))]),\n    _: 1\n  }, 8, [\"modelValue\", \"remote-method\", \"loading\", \"onChange\"])])]), _createElementVNode(\"div\", _hoisted_9, [$setup.conversations.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.conversations, (conversation, key) => {\n    return _openBlock(), _createBlock(_component_router_link, {\n      replace: \"\",\n      key: key,\n      to: $setup.chatLocation(conversation)\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", {\n        class: \"conversation\",\n        onContextmenu: _withModifiers(e => $setup.showRightClickMenu(e, conversation), [\"prevent\", \"stop\"])\n      }, [_createElementVNode(\"div\", _hoisted_12, [_createVNode(_component_el_avatar, {\n        class: \"avatar-img\",\n        src: conversation.data.avatar\n      }, null, 8, [\"src\"]), conversation.unread > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [_createElementVNode(\"span\", _hoisted_14, _toDisplayString(conversation.unread), 1)])) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"span\", _hoisted_17, _toDisplayString(conversation.data.name), 1), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"div\", null, _toDisplayString(_ctx.formatDate(conversation.lastMessage.timestamp)), 1)])]), _createElementVNode(\"div\", _hoisted_19, [conversation.lastMessage.recalled ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [conversation.type === 'private' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, _toDisplayString(conversation.lastMessage.senderId === $setup.currentUser.uuid ? 'you' : `\"${conversation.data.name}\"`) + \" retracted a message \", 1)) : _createCommentVNode(\"\", true), conversation.type === 'group' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, _toDisplayString(conversation.lastMessage.senderId === $setup.currentUser.uuid ? 'you' : `\"${conversation.lastMessage.senderData.name}\"`) + \" retracted a message \", 1)) : _createCommentVNode(\"\", true)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_23, [conversation.lastMessage.read === false && conversation.lastMessage.senderId === $setup.currentUser.uuid ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, \" [unread] \")) : _createCommentVNode(\"\", true), conversation.type === 'private' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, _toDisplayString(conversation.lastMessage.senderId === $setup.currentUser.uuid ? 'me' : conversation.data.name) + \": \", 1)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_26, _toDisplayString(conversation.lastMessage.senderId === $setup.currentUser.uuid ? 'me' : conversation.lastMessage.senderData.name) + \": \", 1)), conversation.lastMessage.type === 'text' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_27, _toDisplayString(conversation.lastMessage.payload.text), 1)) : conversation.lastMessage.type === 'video' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_28, \"[Video messages]\")) : conversation.lastMessage.type === 'audio' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_29, \"[Voice messages]\")) : conversation.lastMessage.type === 'image' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_30, \"[Image messages]\")) : conversation.lastMessage.type === 'file' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_31, \"[File messages]\")) : conversation.lastMessage.type === 'order' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_32, \"[Order messages]\")) : _createCommentVNode(\"\", true)]))])])], 40, _hoisted_11)]),\n      _: 2\n    }, 1032, [\"to\"]);\n  }), 128))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_33, [_createVNode(_component_el_empty, {\n    description: \"No Recent Messages\"\n  })]))])]), $setup.rightClickMenu.visible ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    style: _normalizeStyle({\n      'left': $setup.rightClickMenu.x + 'px',\n      'top': $setup.rightClickMenu.y + 'px'\n    }),\n    class: \"action-box\"\n  }, [_createElementVNode(\"div\", {\n    class: \"action-item\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $setup.topConversation && $setup.topConversation(...args))\n  }, _toDisplayString($setup.rightClickMenu.conversation.top ? 'UNPIN' : 'PIN CHAT TO THE TOP'), 1), _createElementVNode(\"div\", {\n    class: \"action-item\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $setup.deleteConversation && $setup.deleteConversation(...args))\n  }, \"DELETE CHATS\")], 4)) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", _hoisted_34, [(_openBlock(), _createBlock(_component_router_view, {\n    key: _ctx.$route.params.id\n  }))])]);\n}","import { ref, reactive, onMounted, onBeforeUnmount, inject } from 'vue';\nimport { useStore } from 'vuex'; // import restApi from \"@/api/restapi.js\";\n\nimport { encode } from 'js-base64';\nimport { useRouter } from 'vue-router';\nexport default {\n  name: 'chatConversations',\n\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const GoEasy = inject('GoEasy');\n    const goEasy = inject('goEasy');\n    const currentUser = store.state.currentUser;\n    console.log(currentUser);\n    let conversations = ref([]);\n    let rightClickMenu = reactive({\n      conversation: null,\n      visible: false,\n      x: null,\n      y: null\n    });\n    let chatSearchValue = ref('');\n    let chatSearchLoading = ref(false);\n    let chatSearchConversationData = ref([]);\n\n    function turnHistory() {\n      return router.push('/chat/history');\n    }\n\n    function chatSearchRemoteMethod(query) {\n      if (query) {\n        chatSearchLoading.value = true;\n        setTimeout(() => {\n          chatSearchLoading.value = false;\n          chatSearchConversationData.value = conversations.value.filter(item => {\n            return item.data.name.toLowerCase().includes(query.toLowerCase());\n          });\n        }, 200);\n      }\n    }\n\n    function loadConversations() {\n      goEasy.im.latestConversations({\n        onSuccess: result => {\n          console.log(result);\n          let content = result.content;\n          renderConversations(content);\n        },\n        onFailed: error => {\n          console.log('获取最新会话列表失败, code:' + error.code + 'content:' + error.content);\n        }\n      });\n    }\n\n    function listenConversationUpdate() {\n      // 监听会话列表变化\n      goEasy.im.on(GoEasy.IM_EVENT.CONVERSATIONS_UPDATED, renderConversations);\n    }\n\n    function renderConversations(content) {\n      conversations.value = content.conversations;\n    } // function subscribeGroup() {\n    //   let groups = restApi.findGroups(currentUser);\n    //   let groupIds = groups.map((item) => item.id);\n    //   goEasy.im.subscribeGroup({\n    //     groupIds: groupIds,\n    //     onSuccess: function () {\n    //       console.log('订阅群消息成功');\n    //     },\n    //     onFailed: function (error) {\n    //       console.log('订阅群消息失败:', error);\n    //     },\n    //   });\n    // }\n\n\n    function showRightClickMenu(e, conversation) {\n      rightClickMenu.conversation = conversation;\n      rightClickMenu.visible = true;\n      rightClickMenu.x = e.pageX;\n      rightClickMenu.y = e.pageY;\n    }\n\n    function hideRightClickMenu() {\n      rightClickMenu.visible = false;\n    }\n\n    function topConversation() {\n      let conversation = rightClickMenu.conversation;\n      let description = conversation.top ? 'UNPIN' : 'PIN';\n      goEasy.im.topConversation({\n        conversation: conversation,\n        top: !conversation.top,\n        onSuccess: function () {\n          console.log(description, '成功');\n        },\n        onFailed: function (error) {\n          console.log(description, '失败：', error);\n        }\n      });\n    }\n\n    function deleteConversation() {\n      if (confirm('Are you sure you want to delete this conversation？')) {\n        let conversation = rightClickMenu.conversation;\n        goEasy.im.removeConversation({\n          conversation: conversation,\n          onSuccess: function () {\n            console.log('删除会话成功');\n          },\n          onFailed: function (error) {\n            console.log(error);\n          }\n        });\n      }\n    }\n\n    function chatLocationChange(conversation) {\n      if (conversation) {\n        let uuid = conversation.userId;\n        let uuidArr = uuid.split('#');\n        let path = conversation.type === 'private' ? '/chat/messages/privatechat/' + uuidArr[0] : '/chat/messages/groupchat/' + conversation.groupId;\n        let obj = {\n          uuid: conversation.userId,\n          name: conversation.data.name,\n          avatar: conversation.data.avatar\n        };\n        router.push({\n          path: path,\n          query: {\n            str: encodeURI(encode(JSON.stringify(obj)))\n          }\n        });\n      }\n    }\n\n    function chatLocation(conversation) {\n      console.log(conversation);\n      let uuid = conversation.userId;\n      let uuidArr = uuid.split('#');\n      let path = conversation.type === 'private' ? '/chat/messages/privatechat/' + uuidArr[0] : '/chat/messages/groupchat/' + conversation.groupId;\n      let obj = {\n        uuid: conversation.userId,\n        name: conversation.data.name,\n        avatar: conversation.data.avatar\n      };\n      return {\n        path: path,\n        query: {\n          str: encodeURI(encode(JSON.stringify(obj)))\n        }\n      };\n    }\n\n    onMounted(() => {\n      //隐藏Conversation右键菜单\n      document.addEventListener('click', () => {\n        hideRightClickMenu();\n      });\n      listenConversationUpdate(); //监听会话列表变化\n\n      loadConversations(); //加载会话列表\n      // subscribeGroup();  //订阅群消息\n    });\n    onBeforeUnmount(() => {\n      goEasy.im.off(GoEasy.IM_EVENT.CONVERSATIONS_UPDATED, renderConversations);\n    });\n    return {\n      currentUser,\n      conversations,\n      rightClickMenu,\n      chatSearchValue,\n      chatSearchLoading,\n      chatSearchConversationData,\n      chatSearchRemoteMethod,\n      showRightClickMenu,\n      topConversation,\n      deleteConversation,\n      chatLocation,\n      chatLocationChange,\n      turnHistory\n    };\n  }\n\n};","/* unplugin-vue-components disabled */import { render } from \"./Conversations.vue?vue&type=template&id=edcf71fc&scoped=true\"\nimport script from \"./Conversations.vue?vue&type=script&lang=js\"\nexport * from \"./Conversations.vue?vue&type=script&lang=js\"\n\nimport \"./Conversations.vue?vue&type=style&index=0&id=edcf71fc&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\workplace\\\\eslweb\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-edcf71fc\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","key","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","render","_ctx","_cache","$props","$setup","$data","$options","_component_el_button","_component_el_option","_component_el_select","_component_el_avatar","_component_router_link","_component_el_empty","_component_router_view","type","round","onClick","$event","turnHistory","default","modelValue","chatSearchValue","filterable","clearable","remote","chatSearchRemoteMethod","loading","chatSearchLoading","placeholder","onChange","chatLocationChange","chatSearchConversationData","conversation","userId","label","data","name","value","conversations","length","replace","to","chatLocation","onContextmenu","e","showRightClickMenu","src","avatar","unread","formatDate","lastMessage","timestamp","recalled","senderId","currentUser","uuid","senderData","read","payload","text","description","rightClickMenu","visible","style","x","y","args","topConversation","top","deleteConversation","$route","params","id","setup","store","router","GoEasy","goEasy","state","console","log","push","query","setTimeout","filter","item","toLowerCase","includes","loadConversations","im","latestConversations","onSuccess","result","content","renderConversations","onFailed","error","code","listenConversationUpdate","on","IM_EVENT","CONVERSATIONS_UPDATED","pageX","pageY","hideRightClickMenu","confirm","removeConversation","uuidArr","split","path","groupId","obj","str","encodeURI","JSON","stringify","document","addEventListener","off","__exports__"],"sourceRoot":""}