"use strict";(self["webpackChunkeslweb"]=self["webpackChunkeslweb"]||[]).push([[3651],{4359:function(e,t,a){var l=a(6252);const o={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 16 16",width:"1.2em",height:"1.2em"},i=(0,l._)("g",{fill:"currentColor"},[(0,l._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"}),(0,l._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})],-1),n=[i];function s(e,t){return(0,l.wg)(),(0,l.iD)("svg",o,n)}t["Z"]={name:"bi-plus-square",render:s}},6908:function(e,t,a){a.r(t),a.d(t,{default:function(){return te}});var l=a(261),o=a(4359),i=a(6995),n=a(6252),s=a(6612);const r=e=>((0,n.dD)("data-v-ece2b7b6"),e=e(),(0,n.Cn)(),e),c={class:"bg"},d={class:"profile-container"},m={class:"profile-l-container"},u={class:"profile-r-container"},g={class:"profile-r-bg-container"},p={class:"new-deal-t"},h=r((()=>(0,n._)("div",{class:"new-deal-t-l"},"New event",-1))),_={class:"new-deal-t-r"},y=(0,n.Uk)(" DISCARD "),v=(0,n.Uk)(" PUBLISH "),b={class:"event-item-container"},f=r((()=>(0,n._)("div",{class:"event-item-label"}," 1. Basic information ",-1))),w={class:"event-item-c"},C={class:"event-type-container"},V={class:"deals-location-select-container"},k={class:"map-container"},F=r((()=>(0,n._)("div",{id:"mapContainer",class:"basemap"},null,-1))),L=[F],W={class:"event-item-container"},T=r((()=>(0,n._)("div",{class:"event-item-label"}," 2. About your event ",-1))),D={class:"event-item-c"},x={class:"event-date-container"},U={class:"event-date"},S={class:"event-time"},P={class:"event-time-item"},j={class:"event-time-item"},O={class:"account-xll-images"},N={class:"account-xll-image"},I={key:0},q={class:"account-xll-image-mask"},E={class:"account-xll-images"},M={class:"account-xll-image"},H={key:0},z={class:"account-xll-image-mask"};function A(e,t,a,r,F,A){const $=i.Z,J=(0,n.up)("el-button"),Y=(0,n.up)("el-form-item"),G=(0,n.up)("el-col"),Q=(0,n.up)("el-input"),B=(0,n.up)("el-option"),R=(0,n.up)("el-select"),Z=(0,n.up)("el-row"),K=(0,n.up)("el-date-picker"),X=(0,n.up)("el-time-select"),ee=o.Z,te=(0,n.up)("el-icon"),ae=(0,n.up)("el-upload"),le=(0,n.up)("el-image"),oe=(0,n.up)("zoom-in"),ie=(0,n.up)("el-dialog"),ne=(0,n.up)("el-form"),se=(0,n.up)("el-scrollbar"),re=l.Z,ce=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("div",d,[(0,n._)("div",m,[(0,n.Wm)($)]),(0,n._)("div",u,[(0,n._)("div",g,[(0,n._)("div",p,[h,(0,n._)("div",_,[(0,n.Wm)(J,{class:"new-deal-btn",link:"",round:"",onClick:t[0]||(t[0]=e=>A.discard())},{default:(0,n.w5)((()=>[y])),_:1}),(0,n.Wm)(J,{class:"new-deal-btn",type:"primary",round:"",loading:F.submitLoadingValue,onClick:t[1]||(t[1]=e=>A.submitForm("basicForm"))},{default:(0,n.w5)((()=>[v])),_:1},8,["loading"])])]),(0,n.Wm)(se,{class:"basic-form"},{default:(0,n.w5)((()=>[(0,n.Wm)(ne,{ref:"basicForm",model:F.basicForm,rules:F.basicRules,"label-width":"120px","label-position":"top",class:"demo-ruleForm"},{default:(0,n.w5)((()=>[(0,n._)("div",b,[f,(0,n._)("div",w,[(0,n.Wm)(Z,{gutter:50},{default:(0,n.w5)((()=>[(0,n.Wm)(G,{xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,n.w5)((()=>[(0,n.Wm)(Y,{label:"Event Type"},{default:(0,n.w5)((()=>[(0,n._)("div",C,[(0,n._)("div",{class:(0,s.C_)(["event-type",1===F.dealLocationTypeValue?"event-type-active":""]),onClick:t[2]||(t[2]=e=>A.dealLocationTypeChange(1))}," ONLINE ",2),(0,n._)("div",{class:(0,s.C_)(["event-type",2===F.dealLocationTypeValue?"event-type-active":""]),onClick:t[3]||(t[3]=e=>A.dealLocationTypeChange(2))}," OFFLINE ",2),(0,n._)("div",{class:(0,s.C_)(["event-type",3===F.dealLocationTypeValue?"event-type-active":""]),onClick:t[4]||(t[4]=e=>A.dealLocationTypeChange(3))}," BOTH ",2)])])),_:1})])),_:1}),(0,n.Wm)(G,{xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,n.w5)((()=>[2===F.dealLocationTypeValue||3===F.dealLocationTypeValue?((0,n.wg)(),(0,n.j4)(Y,{key:0,label:"Venue",prop:"event_place"},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{modelValue:F.basicForm.event_place,"onUpdate:modelValue":t[5]||(t[5]=e=>F.basicForm.event_place=e),type:"text",placeholder:"eg. Mercedes-Benz Arena"},null,8,["modelValue"])])),_:1})):(0,n.kq)("",!0),1===F.dealLocationTypeValue||3===F.dealLocationTypeValue?((0,n.wg)(),(0,n.j4)(Y,{key:1,label:"Event Link"},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{modelValue:F.basicForm.online_url,"onUpdate:modelValue":t[6]||(t[6]=e=>F.basicForm.online_url=e),placeholder:"eg. eventlink.com"},null,8,["modelValue"])])),_:1})):(0,n.kq)("",!0)])),_:1}),2===F.dealLocationTypeValue||3===F.dealLocationTypeValue?((0,n.wg)(),(0,n.j4)(G,{key:0,xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,n.w5)((()=>[(0,n.Wm)(Y,{label:"Location"},{default:(0,n.w5)((()=>[(0,n._)("div",V,[(0,n.Wm)(R,{modelValue:F.countryObj,"onUpdate:modelValue":t[7]||(t[7]=e=>F.countryObj=e),teleported:!1,onChange:A.countryChange,"value-key":"id",filterable:"",placeholder:"Select country"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(F.countryOptions,((e,t)=>((0,n.wg)(),(0,n.j4)(B,{key:t,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),F.provinceOptions.length>0?((0,n.wg)(),(0,n.j4)(R,{key:0,modelValue:F.provinceObj,"onUpdate:modelValue":t[8]||(t[8]=e=>F.provinceObj=e),teleported:!1,style:{"margin-top":"10px"},"value-key":"id",filterable:"",onChange:A.provinceChange,placeholder:"Select state/province"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(F.provinceOptions,((e,t)=>((0,n.wg)(),(0,n.j4)(B,{key:t,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])):(0,n.kq)("",!0),F.cityOptions.length>0?((0,n.wg)(),(0,n.j4)(R,{key:1,modelValue:F.cityObj,"onUpdate:modelValue":t[9]||(t[9]=e=>F.cityObj=e),teleported:!1,style:{"margin-top":"10px"},"value-key":"id",filterable:"",onChange:A.cityChange,placeholder:"Select city"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(F.cityOptions,((e,t)=>((0,n.wg)(),(0,n.j4)(B,{key:t,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])):(0,n.kq)("",!0)]),(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",k,L)),[[ce,F.mapLoading]])])),_:1})])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(G,{xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,n.w5)((()=>[(0,n.Wm)(Y,{label:"Category",prop:"category_id"},{default:(0,n.w5)((()=>[(0,n.Wm)(R,{modelValue:F.basicForm.category_id,"onUpdate:modelValue":t[10]||(t[10]=e=>F.basicForm.category_id=e),teleported:!1,placeholder:"Select category"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(F.categoryData,(e=>((0,n.wg)(),(0,n.j4)(B,{key:e.id,label:e.name_en,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])]),(0,n._)("div",W,[T,(0,n._)("div",D,[(0,n.Wm)(Z,{gutter:50},{default:(0,n.w5)((()=>[(0,n.Wm)(G,{xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,n.w5)((()=>[(0,n.Wm)(Y,{label:"Event name",prop:"name"},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{modelValue:F.basicForm.name,"onUpdate:modelValue":t[11]||(t[11]=e=>F.basicForm.name=e),placeholder:"Name of the event"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(G,{xs:24,sm:24,md:12,lg:12,xl:12},{default:(0,n.w5)((()=>[(0,n.Wm)(Y,{label:"Event description",prop:"desc"},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{modelValue:F.basicForm.desc,"onUpdate:modelValue":t[12]||(t[12]=e=>F.basicForm.desc=e),type:"textarea",placeholder:"Provide a paragraph or two about the event"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(G,{xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,n.w5)((()=>[(0,n.Wm)(Y,{label:"Event Date",required:"",prop:"date"},{default:(0,n.w5)((()=>[(0,n._)("div",x,[(0,n._)("div",U,[(0,n.Wm)(K,{modelValue:F.basicForm.date,"onUpdate:modelValue":t[13]||(t[13]=e=>F.basicForm.date=e),onChange:A.eventDateChange,type:"date",disabledDate:r.eventDisabledDate,placeholder:"Day","value-format":"YYYY-MM-DD"},null,8,["modelValue","onChange","disabledDate"])]),(0,n._)("div",S,[(0,n._)("div",P,[(0,n.Wm)(X,{onChange:A.startTimeChange,modelValue:F.startTime,"onUpdate:modelValue":t[14]||(t[14]=e=>F.startTime=e),"max-time":F.endTime,placeholder:"Start time",start:"00:00",step:"00:01",end:"23:59"},null,8,["onChange","modelValue","max-time"])]),(0,n._)("div",j,[(0,n.Wm)(X,{onChange:A.endTimeChange,modelValue:F.endTime,"onUpdate:modelValue":t[15]||(t[15]=e=>F.endTime=e),"min-time":F.startTime,placeholder:"End time",start:"00:00",step:"00:01",end:"23:59"},null,8,["onChange","modelValue","min-time"])])])])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(Z,{gutter:50},{default:(0,n.w5)((()=>[(0,n.Wm)(G,{xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,n.w5)((()=>[(0,n.Wm)(Y,{label:"ESL Passport Members Get",prop:"type_desc"},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{modelValue:F.basicForm.type_desc,"onUpdate:modelValue":t[16]||(t[16]=e=>F.basicForm.type_desc=e),type:"textarea",rows:4,placeholder:"Enter the deal/discount you will offer our members."},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(G,{xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,n.w5)((()=>[(0,n.Wm)(Y,{label:"Price",prop:"pay_money"},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{gutter:10},{default:(0,n.w5)((()=>[(0,n.Wm)(G,{xs:24,sm:24,md:8,lg:8,xl:8},{default:(0,n.w5)((()=>[(0,n.Wm)(R,{modelValue:F.basicForm.currency,"onUpdate:modelValue":t[17]||(t[17]=e=>F.basicForm.currency=e),teleported:!1,placeholder:"currency"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(F.currencyList,((e,t)=>((0,n.wg)(),(0,n.j4)(B,{key:t,label:e.object_en,value:e.object_en},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,n.Wm)(G,{xs:24,sm:24,md:16,lg:16,xl:16},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{modelValue:F.basicForm.pay_money,"onUpdate:modelValue":t[18]||(t[18]=e=>F.basicForm.pay_money=e),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"amount per ticket"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(G,{xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,n.w5)((()=>[(0,n.Wm)(Y,{label:"Company name",prop:"third_com_name"},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{modelValue:F.basicForm.third_com_name,"onUpdate:modelValue":t[19]||(t[19]=e=>F.basicForm.third_com_name=e),type:"text",placeholder:"Company name"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(G,{xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,n.w5)((()=>[(0,n.Wm)(Y,{label:"Tags"},{default:(0,n.w5)((()=>[(0,n.Wm)(R,{modelValue:F.selectTagsValue,"onUpdate:modelValue":t[20]||(t[20]=e=>F.selectTagsValue=e),teleported:!1,multiple:"","collapse-tags":"","collapse-tags-tooltip":"",placeholder:"Select",filterable:"","allow-create":"","value-key":"id"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(F.tagsData,((e,t)=>((0,n.wg)(),(0,n.j4)(B,{key:t,label:e.name_en,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(Z,{gutter:50},{default:(0,n.w5)((()=>[(0,n.Wm)(G,{xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,n.w5)((()=>[(0,n.Wm)(Y,{label:"Poster(2:3 ratio)",prop:"file"},{default:(0,n.w5)((()=>[(0,n.Wm)(ae,{class:"profile-uploader",action:"",accept:".jpg,.jpeg,.png,.JPG,.JPEG,.PNG",headers:F.uploadHeaders,"show-file-list":!1,"http-request":A.flyerHttpRequest,"before-upload":A.beforeFlyerPhotoUpload},{default:(0,n.w5)((()=>[(0,n.Wm)(te,{size:45},{default:(0,n.w5)((()=>[(0,n.Wm)(ee)])),_:1})])),_:1},8,["headers","http-request","before-upload"]),(0,n._)("div",O,[(0,n._)("div",N,[F.flyerPhotoUrl?((0,n.wg)(),(0,n.iD)("div",I,[(0,n.Wm)(le,{style:{width:"100%"},src:F.flyerPhotoUrl},null,8,["src"])])):(0,n.kq)("",!0),(0,n._)("div",q,[(0,n._)("span",{onClick:t[21]||(t[21]=e=>A.handleSingleImagePreview(F.flyerPhotoUrl))},[(0,n.Wm)(te,{color:"#ffffff",size:45},{default:(0,n.w5)((()=>[(0,n.Wm)(oe)])),_:1})])])])]),(0,n.Wm)(ie,{width:"50%",modelValue:F.dialogSingleImageVisible,"onUpdate:modelValue":t[22]||(t[22]=e=>F.dialogSingleImageVisible=e),center:""},{default:(0,n.w5)((()=>[(0,n.Wm)(le,{src:F.dialogSingleImageUrl},null,8,["src"])])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(G,{xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,n.w5)((()=>[(0,n.Wm)(Y,{label:"Company Logo",prop:"third_com_logo"},{default:(0,n.w5)((()=>[(0,n.Wm)(ae,{class:"profile-uploader",action:"",accept:".jpg,.jpeg,.png,.JPG,.JPEG,.PNG",headers:F.uploadHeaders,"show-file-list":!1,"http-request":A.companyLogoHttpRequest,"before-upload":A.beforeCompanyLogoPhotoUpload},{default:(0,n.w5)((()=>[(0,n.Wm)(te,{size:45},{default:(0,n.w5)((()=>[(0,n.Wm)(ee)])),_:1})])),_:1},8,["headers","http-request","before-upload"]),(0,n._)("div",E,[(0,n._)("div",M,[F.companyLogoPhotoUrl?((0,n.wg)(),(0,n.iD)("div",H,[(0,n.Wm)(le,{style:{width:"100%"},src:F.companyLogoPhotoUrl},null,8,["src"])])):(0,n.kq)("",!0),(0,n._)("div",z,[(0,n._)("span",{onClick:t[23]||(t[23]=e=>A.handleSingleImagePreview(F.companyLogoPhotoUrl))},[(0,n.Wm)(te,{color:"#ffffff",size:45},{default:(0,n.w5)((()=>[(0,n.Wm)(oe)])),_:1})])])])])])),_:1})])),_:1})])),_:1})])])])),_:1},8,["model","rules"])])),_:1})])])]),(0,n.Wm)(re,{show:F.uploadLoadingStatus,onOnCancel:t[24]||(t[24]=e=>A.cancelUpload())},null,8,["show"])])}a(1703);var $=a(1836),J=a(6158),Y=a.n(J),G=a(8847),Q=a.n(G),B=a(8005),R=a.n(B),Z=a(2576),K={name:"post",components:{meSideMenu:i.Z,xllLoading:l.Z},setup(){const e=e=>{let t=new Date,a=t.getFullYear(),l=t.getMonth()+1,o=t.getDate(),i=a+"-"+l+"-"+o,n=new Date(i);return e.getTime()<n.getTime()};return{eventDisabledDate:e}},data(){const e=(e,t,a)=>t?this.startTime?this.endTime?void a():a(new Error("Please select end time")):a(new Error("Please select start time")):a(new Error("Please select date"));return{dialogSingleImageVisible:!1,dialogSingleImageUrl:"",currencyList:[],addCurrencyStatus:!1,ownCurrencyValue:"",ownCurrencyList:[],selectCurrencyList:[],selectCurrencyArr:[],uploadLoadingStatus:!1,mapLoading:!1,map1Loading:!1,uploadActionUrl:"https://api.edupassport.io/api/user/uploadImg",uploadHeaders:{platform:4},uploadData:{token:localStorage.getItem("token")},flyerPhotoUrl:"",companyLogoPhotoUrl:"",accessToken:"pk.eyJ1Ijoic3JrbGluZ2UiLCJhIjoiY2t2NnR4anI2OWU5NDJ3bWE1dHd3c3h1aSJ9.O0JfjqiyBBkFuf4G-DQ-DQ",mapStyle:"mapbox://styles/mapbox/streets-v11",dealLocationTypeValue:1,userInfo:{},basicUserInfo:{},countryObj:{},provinceObj:{},cityObj:{},countryName:"",countryNameCn:"",provinceName:"",provinceNameCn:"",cityName:"",cityNameCn:"",countryOptions:[],provinceOptions:[],cityOptions:[],startTime:"",endTime:"",eventDate:"",basicForm:{token:localStorage.getItem("token"),user_id:localStorage.getItem("uid"),name:void 0,desc:void 0,third_com_logo:void 0,third_com_name:void 0,type_desc:void 0,pay_money:void 0,date:void 0,file:void 0,file_name:void 0,is_all:"1",event_place:void 0,start_time:void 0,end_time:void 0,is_online:1,online_url:void 0,location:void 0,country_id:void 0,state_id:void 0,town_id:void 0,lat:void 0,lng:void 0,category_id:void 0,currency:"USD",tag:[],tags_cn:"",tags_en:""},basicRules:{name:[{required:!0,message:"Please input",trigger:"blur"}],desc:[{required:!0,message:"Please input",trigger:"blur"}],date:[{required:!0,validator:e,trigger:"change"}],file:[{required:!0,message:"Please upload",trigger:"blur"}],third_com_logo:[{required:!1,message:"Please upload",trigger:"blur"}],third_com_name:[{required:!1,message:"Please input",trigger:"blur"}]},categoryData:[],tagsData:[],addTagsStatus:!1,ownTagsValue:"",ownTagsList:[],selectTagsList:[],selectTagsArr:[],tagsCnData:[],tagsEnData:[],submitLoadingValue:!1,selectTagsValue:[]}},unmounted(){(0,Z.lJ)(),window.onresize=null},mounted(){let e=document.body.clientWidth,t=Math.floor(e);t<=768&&(0,Z.lJ)(),window.onresize=()=>{t<=768&&(0,Z.lJ)()};let a=this.$route.query.id;a&&this.getEventDetail(a),this.getAllCountry(),this.getUserObjectList(),this.getEventCategories(),this.getEventsTags()},methods:{getEventDetail(e){let t={event_id:e};(0,$.j1)(t).then((e=>{if(console.log(e),200==e.code){let t=e.message,a={token:localStorage.getItem("token"),user_id:localStorage.getItem("uid"),name:t.name,desc:t.desc,third_com_logo:t.third_com_logo,third_com_name:t.third_com_name,type_desc:t.type_desc,pay_money:t.pay_money,date:t.date,file:t.file,file_name:t.file_name,is_all:"1",event_place:t.event_place,start_time:t.start_time,end_time:t.end_time,is_online:1,online_url:t.online_url,location:t.location,country_id:t.country_id,state_id:t.state_id,town_id:t.town_id,lat:t.lat,lng:t.lng,category_id:t.category_id,currency:"USD",tag:[],tags_cn:t.tags_cn,tags_en:t.tags_en},l=t.start_time,o=t.end_time;this.dealLocationTypeValue=t.is_online,this.eventDate=t.date,this.startTime=(0,Z.N8)(l),this.endTime=(0,Z.N8)(o),this.basicForm=Object.assign({},a),this.basicForm.event_id=t.id,this.flyerPhotoUrl=t.file,this.companyLogoPhotoUrl=t.third_com_logo}})).catch((e=>{console.log(e)}))},handleSingleImagePreview(e){this.dialogSingleImageUrl=e,this.dialogSingleImageVisible=!0},companyLogoHttpRequest(e){let t=this;new(R())(e.file,{quality:.6,success(e){const a=new FormData;a.append("token",localStorage.getItem("token"));let l="no";"yes"===l&&(a.append("file[]",e,e.name),(0,$._p)(a).then((e=>{if(200==e.code){let a=e.data[0]["file_url"];t.uploadLoadingStatus=!1,t.companyLogoPhotoUrl=a,t.basicForm.third_com_logo=a}})).catch((e=>{console.log(e)}))),"no"===l&&(a.append("file",e,e.name),(0,$.Qz)(a).then((e=>{if(200==e.code){let a=e.message.file_path;t.uploadLoadingStatus=!1,t.companyLogoPhotoUrl=a,t.basicForm.third_com_logo=a}})).catch((e=>{console.log(e)})))},error(e){console.log(e.message)}})},flyerHttpRequest(e){let t=this;new(R())(e.file,{quality:.6,success(e){const a=new FormData;a.append("token",localStorage.getItem("token"));let l="no";"yes"===l&&(a.append("file[]",e,e.name),(0,$._p)(a).then((e=>{if(200==e.code){let a=e.data[0]["file_url"];t.uploadLoadingStatus=!1,t.flyerPhotoUrl=a,t.basicForm.file=a}})).catch((e=>{console.log(e)}))),"no"===l&&(a.append("file",e,e.name),(0,$.Qz)(a).then((e=>{if(200==e.code){let a=e.message.file_path;t.uploadLoadingStatus=!1,t.flyerPhotoUrl=a,t.basicForm.file=a}})).catch((e=>{console.log(e)})))},error(e){console.log(e.message)}})},getEventsTags(){let e={page:1,limit:1e4,type:2};(0,$.SL)(e).then((e=>{console.log(e),200==e.code&&(this.tagsData=e.message.data)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getEventCategories(){let e={page:1,limit:1e4};(0,$.Qf)(e).then((e=>{this.categoryData=e.message.data})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},dealLocationTypeChange(e){let t=this;this.dealLocationTypeValue=e,t.basicForm.is_online=e,2===e&&(this.mapLoading=!0,setTimeout((function(){t.initMap(),t.mapLoading=!1}),1e3)),3===e&&(this.map1Loading=!0,setTimeout((function(){t.initMap(),t.map1Loading=!1}),1e3))},beforeFlyerPhotoUpload(e){this.uploadLoadingStatus=!0;const t=e.size/1024/1024<20;return t||this.$message.error("Avatar picture size can not exceed 20MB"),t},beforeCompanyLogoPhotoUpload(e){this.uploadLoadingStatus=!0;const t=e.size/1024/1024<20;return t||this.$message.error("Avatar picture size can not exceed 20MB"),t},cancelUpload(){this.uploadLoadingStatus=!1},eventDateChange(e){this.eventDate=e},startTimeChange(e){this.startTime=e},endTimeChange(e){this.endTime=e},initMap(){Y().accessToken=this.accessToken;const e=new(Y().Map)({container:"mapContainer",center:[121.472644,31.231706],style:this.mapStyle,zoom:12}),t=new(Y().NavigationControl);e.addControl(t,"top-right"),e.addControl(new(Y().FullscreenControl));const a=new(Y().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});e.addControl(a,"top-right");const l=new(Q())({accessToken:this.accessToken,language:"en-US",mapboxgl:Y()});e.addControl(l,"top-left");const o=new(Y().Marker);l.on("result",(t=>{console.log(t),o.setLngLat(t.result.center).addTo(e),this.basicForm.location=t.result.place_name,this.basicForm.lng=t.result.center[0],this.basicForm.lat=t.result.center[1]})),l.on("clear",(e=>{console.log(e),this.basicForm.location="",this.basicForm.lng="",this.basicForm.lat=""}))},initMap1(){Y().accessToken=this.accessToken;const e=new(Y().Map)({container:"mapContainer1",center:[121.472644,31.231706],style:this.mapStyle,zoom:12}),t=new(Y().NavigationControl);e.addControl(t,"top-right");const a=new(Y().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});e.addControl(a,"top-right");const l=new(Q())({accessToken:this.accessToken,mapboxgl:Y()});e.addControl(l,"top-left");const o=new(Y().Marker);l.on("result",(t=>{console.log(t),o.setLngLat(t.result.center).addTo(e),this.basicForm.location=t.result.place_name,this.basicForm.lng=t.result.center[0],this.basicForm.lat=t.result.center[1]})),l.on("clear",(e=>{console.log(e),this.basicForm.location="",this.basicForm.lng="",this.basicForm.lat=""}))},getAllCountry(){let e={};(0,$.PQ)(e).then((e=>{console.log(e),200==e.code&&(this.countryOptions=e.message)})).catch((e=>{this.$message.error(e.msg)}))},getAllProvinces(e){let t={country_id:e};(0,$.PQ)(t).then((e=>{console.log(e),200==e.code&&(this.provinceOptions=e.message)})).catch((e=>{this.$message.error(e.msg)}))},getAllCitys(e,t){let a={country_id:e,state_id:t};(0,$.PQ)(a).then((e=>{console.log(e),200==e.code&&(this.cityOptions=e.message)})).catch((e=>{this.$message.error(e.msg)}))},countryChange(e){this.basicForm.state_id=void 0,this.basicForm.town_id=void 0,this.provinceOptions=[],this.cityOptions=[],this.basicForm.country_id=e.id,this.countryName=e.name,this.countryNameCn=e.name,this.getAllProvinces(e.id)},provinceChange(e){this.basicForm.town_id=void 0,this.cityOptions=[],this.basicForm.state_id=e.id,this.provinceName=e.name,this.provinceNameCn=e.name,this.getAllCitys(this.basicForm.country_id,e.id)},cityChange(e){this.basicForm.town_id=e.id,this.cityName=e.name,this.cityNameCn=e.name},getUserObjectList(){let e={token:localStorage.getItem("token")};(0,$.hF)(e).then((e=>{200==e.code&&(this.currencyList=e.message.filter((e=>117===e.pid)))})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},discard(){this.$router.go(-1)},submitForm(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),this.$message({type:"warning",message:"Please complete all required fields",grouping:!0}),!1;{let e=this.selectTagsValue,t=[],a=[],l=[];e.length>0&&e.forEach((e=>{"string"===typeof e&&(console.log("string"),l.push(e),a.push(e)),"object"===typeof e&&(console.log("object"),t.push(e.id),l.push(e.name_cn),a.push(e.name_en))})),this.basicForm.tag=t,this.basicForm.tags_cn=l.join(","),this.basicForm.tags_en=a.join(","),this.eventDate&&(this.basicForm.date=this.eventDate),this.eventDate&&this.startTime&&(this.basicForm.start_time=this.eventDate+" "+this.startTime+":00"),this.eventDate&&this.endTime&&(this.basicForm.end_time=this.eventDate+" "+this.endTime+":00");let o={country_name_en:this.countryName,country_name_cn:this.countryNameCn,province_name_en:this.provinceName,province_name_cn:this.provinceNameCn,city_name_en:this.cityName,city_name_cn:this.cityNameCn};this.basicForm.country_info=JSON.stringify(o),this.$loading({text:"Loading..."});let i=Object.assign({},this.basicForm);(0,$.QY)(i).then((e=>{console.log(e),200==e.code&&(this.$loading().close(),this.$router.push("/events/myEvents"))})).catch((e=>{console.log(e),this.$message.error(e.msg),this.$loading().close()}))}}))}}},X=a(8118);const ee=(0,X.Z)(K,[["render",A],["__scopeId","data-v-ece2b7b6"]]);var te=ee}}]);
//# sourceMappingURL=3651.0d969dc6.js.map