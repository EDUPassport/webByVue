"use strict";(self["webpackChunkeslweb"]=self["webpackChunkeslweb"]||[]).push([[3952],{7033:function(e,t,o){o.d(t,{Z:function(){return g}});var s=o(6252);const i={class:"action-container"},n={class:"action-l"},a=(0,s.Uk)(" EXIT PREVIEW "),r={class:"action-r"},l=(0,s.Uk)(" EDIT PROFILE ");function c(e,t,o,c,u,h){const d=(0,s.up)("ArrowLeft"),m=(0,s.up)("el-icon"),g=(0,s.up)("el-button");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",n,[(0,s.Wm)(g,{class:"action-exit-preview-btn",link:"",onClick:t[0]||(t[0]=e=>h.exitPreview())},{default:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d)])),_:1}),a])),_:1})]),(0,s._)("div",r,[(0,s.Wm)(g,{onClick:t[1]||(t[1]=e=>h.editProfile()),plain:"",round:""},{default:(0,s.w5)((()=>[l])),_:1})])])}var u=o(4276),h={name:"businessProfileActionWithPreview",props:["info","identity"],methods:{exitPreview(){this.$router.push("/account/home")},editProfile(){let e=this.info.id,t=this.identity,o="";if(e){let t={cid:e,action:"edit"};o=(0,u.cv)(JSON.stringify(t))}else{let e={i:t,action:"add"};o=(0,u.cv)(JSON.stringify(e))}2==t&&this.$router.push({path:"/business/edit/recruiter",query:{s:o}}),3==t&&this.$router.push({path:"/business/edit/school",query:{s:o}}),4==t&&this.$router.push({path:"/business/edit/other",query:{s:o}}),5==t&&this.$router.push({path:"/vendor/edit/vendor",query:{s:o}})}}},d=o(8118);const m=(0,d.Z)(h,[["render",c],["__scopeId","data-v-3f9f5822"]]);var g=m},6846:function(e,t,o){o.r(t),o.d(t,{default:function(){return v}});var s=o(1708),i=o(7033),n=o(3640),a=o(6995),r=o(6252);const l={class:"business-profile-container"},c={class:"business-profile-l"},u={class:"business-profile-r"},h={class:"business-jobs"};function d(e,t,o,d,m,g){const p=a.Z,b=n.Z,f=(0,r.up)("el-col"),y=i.Z,v=s.Z,_=(0,r.up)("el-scrollbar"),J=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",c,[(0,r.Wm)(p)]),(0,r._)("div",u,[(0,r.Wm)(J,{gutter:0,align:"top",justify:"space-between"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{xs:0,sm:0,md:8,lg:9,xl:8},{default:(0,r.w5)((()=>[(0,r._)("div",h,[(0,r.Wm)(b,{jobListData:m.otherJobsData,companyInfo:m.companyInfo,jobLimit:m.otherJobLimit,jobTotalNum:m.otherJobTotalNum,jobPage:m.otherJobPage,adsData:[],"from-business-profile":!0,onJobDetailEvent:g.turnJobDetail,onBackToResults:g.backToResults,onJobPageChange:g.otherJobPageChange,onAddFavorite:g.addFavorite,onCancelFavorite:g.cancelFavorite},null,8,["jobListData","companyInfo","jobLimit","jobTotalNum","jobPage","onJobDetailEvent","onBackToResults","onJobPageChange","onAddFavorite","onCancelFavorite"])])])),_:1}),(0,r.Wm)(f,{class:"business-profile-col",xs:24,sm:24,md:16,lg:15,xl:16},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{info:m.companyInfo,identity:g.identity},null,8,["info","identity"]),(0,r.Wm)(_,{class:"business-profile"},{default:(0,r.w5)((()=>[(0,r.Wm)(v,{info:m.companyInfo,identity:g.identity,fromMe:!0},null,8,["info","identity"])])),_:1})])),_:1})])),_:1})])])}var m=o(1836),g=o(4276),p=o(2576),b={name:"profile",components:{meSideMenu:a.Z,businessProfile:s.Z,jobsListComponent:n.Z,businessProfileActionWithPreview:i.Z},computed:{identity:{get(){return this.$store.state.identity}}},data(){return{profilePercentage:0,userContact:{},companyContact:{},companyInfo:{},otherJobsData:[],otherJobTotalNum:0,otherJobLimit:10,otherJobPage:1}},unmounted(){(0,p.lJ)(),window.onresize=null},mounted(){let e=document.body.clientWidth,t=Math.floor(e);t<=768&&(0,p.lJ)(),window.onresize=()=>{t<=768&&(0,p.lJ)()};let o=this.$route.query.str;o&&console.log((0,g.Jx)(o)),this.getUserInfo(),this.updateBusinessProfile(),this.getCompanyJobList(1,1e4)},methods:{updateBusinessProfile(){let e={token:localStorage.getItem("token")};2==this.identity&&(0,m.H7)(e).then((e=>{console.log(e)})).catch((e=>{console.log(e),this.$message.error(e.msg)})),3==this.identity&&(0,m.kg)(e).then((e=>{console.log(e)})).catch((e=>{console.log(e),this.$message.error(e.msg)})),4==this.identity&&(0,m.yx)(e).then((e=>{console.log(e)})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getUserInfo(){let e=localStorage.getItem("identity"),t={identity:e};(0,m.Lk)(t).then((t=>{if(console.log(t),200==t.code){let o=t.message.user_contact,s=t.message.user_contact.company;if(2==e&&(this.profilePercentage=o.is_recruiting),3==e&&(this.profilePercentage=o.is_school),4==e&&(this.profilePercentage=o.is_other),s&&(this.companyInfo=s,this.$store.commit("jobCompanyName",s.company_name),s.benefits)){let e=s.benefits;e.forEach(((t,o)=>{e[o].id=t.object_id,e[o].pid=t.object_pid})),this.selectBenefitsList=e,this.benefitsList=s.benefits}o&&(this.userContact=o);let i=s.images;this.accountImageFileList=[],i&&i.forEach((e=>{let t={name:"",url:e.url};this.accountImageFileList.push(t)}))}})).catch((e=>{console.log(e),this.$message.error(e.msg)}))},getCompanyJobList(e,t){let o=localStorage.getItem("uid"),s={user_id:o,is_open:1,status:1,page:e,limit:t};(0,m.kM)(s).then((e=>{console.log(e),200==e.code&&(this.otherJobsData=e.message.data,this.otherJobTotalNum=e.message.total)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},turnJobDetail(e,t){let o="/jobs/detail/"+e+"/"+t,s=localStorage.getItem("uid");this.selectedJobId=e,this.$router.push({path:o,query:{uid:s}})},otherJobPageChange(e){console.log(e),this.otherJobPage=e,this.selectedJobId=0,this.getCompanyJobList(this.companyInfo.user_id,e,this.otherJobLimit)},backToResults(){this.isOther=!1,this.$router.push({path:"/jobs",query:{id:this.selectedJobId,page:this.jobPage}})},addFavorite(e,t,o,s,i){let n={token:localStorage.getItem("token"),type:t,type_id:e,type_title:o,type_url:s};(0,m.q8)(n).then((e=>{console.log(e),200==e.code&&(this.$message.success("Success"),this.jobListData[i]["is_favorite"]=1)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))},cancelFavorite(e,t,o){let s={token:localStorage.getItem("token"),type:e,type_id:t};(0,m.Bv)(s).then((e=>{console.log(e),200==e.code&&(this.jobListData[o]["is_favorite"]=0)})).catch((e=>{console.log(e),e.msg&&this.$message.error(e.msg),e.message&&this.$message.error(e.message)}))}}},f=o(8118);const y=(0,f.Z)(b,[["render",d],["__scopeId","data-v-031c38ca"]]);var v=y}}]);
//# sourceMappingURL=3952.0ecd943e.js.map